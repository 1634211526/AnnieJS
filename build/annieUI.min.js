var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},annie;!function(t){var e=function(){function t(){this._instanceId=0,this._instanceType="annie.AObject",this._instanceId=t._object_id++}return Object.defineProperty(t.prototype,"instanceId",{get:function(){return this._instanceId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"instanceType",{get:function(){return this._instanceType},enumerable:!0,configurable:!0}),t._object_id=0,t}();t.AObject=e;var n=function(e){function n(){e.call(this),this.eventTypes={},this.eventTypes1={},this._instanceType="annie.EventDispatcher"}return __extends(n,e),n.getMouseEventCount=function(t){void 0===t&&(t="");var e=0;if(""==t)for(var i in n._MECO)0==i.indexOf("onMouse")&&(e+=n._MECO[i]);else n._MECO[t]&&(e=n._MECO[t]);return e},n.prototype.addEventListener=function(t,e){if(!t)throw new Error("添加侦听的type值为undefined");if(!e)throw new Error("侦听回调函数不能为null");var n=this;n.eventTypes[t]||(n.eventTypes[t]=[]),n.eventTypes[t].indexOf(e)<0&&(n.eventTypes[t].unshift(e),0==t.indexOf("onMouse")&&n._changeMouseCount(t,!0))},n.prototype._changeMouseCount=function(t,e){var i=e?1:-1;n._MECO[t]||(n._MECO[t]=0),n._MECO[t]+=i,n._MECO[t]<0&&(n._MECO[t]=0),n._totalMEC+=i},n.prototype.dispatchEvent=function(e,n){void 0===n&&(n=null);var i=this;"string"==typeof e&&(i._defaultEvent?i._defaultEvent.reset(e,i):i._defaultEvent=new t.Event(e),e=i._defaultEvent);var a=i.eventTypes[e.type];if(a){var o=a.length;null==e.target&&(e.target=i),null!=n&&(e.data=n);for(var r=o-1;r>=0;r--)a[r]?a[r](e):a.splice(r,1);return!0}return!1},n.prototype.hasEventListener=function(t,e){return void 0===e&&(e=0),!(0!=e&&1!=e||!this.eventTypes[t]||!(this.eventTypes[t].length>0))||!(0!=e&&2!=e||!this.eventTypes1[t]||!(this.eventTypes1[t].length>0))},n.prototype.removeEventListener=function(t,e){var n=this,i=n.eventTypes[t];if(i)for(var a=i.length,o=a-1;o>=0;o--)i[o]===e&&(i.splice(o,1),0==t.indexOf("onMouse")&&n._changeMouseCount(t,!1))},n.prototype.removeAllEventListener=function(){var t=this;for(var e in t.eventTypes)if(0==e.indexOf("onMouse"))for(var n=0;n<t.eventTypes[e].length;n++)t._changeMouseCount(e,!1);t.eventTypes={}},n.prototype.destroy=function(){var t=this;t.removeAllEventListener(),t.eventTypes=null},n._MECO={},n._totalMEC=0,n}(e);t.EventDispatcher=n}(annie||(annie={}));var annie;!function(t){t.version="2.0.0",t.devicePixelRatio=1,t.globalDispatcher=new t.EventDispatcher,t.StageScaleMode={EXACT_FIT:"exactFit",NO_BORDER:"noBorder",NO_SCALE:"noScale",SHOW_ALL:"showAll",FIXED_WIDTH:"fixedWidth",FIXED_HEIGHT:"fixedHeight"}}(annie||(annie={}));var annie;!function(t){var e=!0,n=function(t){function e(){t.call(this),this.currentFrame=0,this.totalFrames=0,this._isLoop=0,this._delay=0,this._isFront=!0,this._cParams=null,this._loop=!1}return __extends(e,t),e.prototype.init=function(t,e,n,i){if(void 0===i&&(i=!0),e<=0||"number"!=typeof e)throw new Error("annie.Tween.to()或者annie.Tween.from()方法的第二个参数一定要是大于0的数字");var a=this;a.currentFrame=1;var o=60*e>>0;a.totalFrames=o>0?o:1,a.target=t,a._isTo=i,a._isLoop=0,a._startData={},a._disData={},a._delay=0,a._isFront=!0,a._ease=null,a._update=null,a._cParams=null,a._loop=!1,a._completeFun=null;for(var r in n)switch(r){case"useFrame":1==n[r]&&(a.totalFrames=e);break;case"yoyo":!1===n[r]?a._isLoop=0:!0===n[r]?a._isLoop=Number.MAX_VALUE:a._isLoop=n[r];break;case"delay":n.useFrame?a._delay=n[r]:a._delay=60*n[r]>>0;break;case"ease":a._ease=n[r];break;case"onUpdate":a._update=n[r];break;case"onComplete":a._completeFun=n[r];break;case"completeParams":a._cParams=n[r];break;case"loop":a._loop=n[r];break;default:"number"==typeof n[r]&&(i?(a._startData[r]=t[r],a._disData[r]=n[r]-t[r]):(a._startData[r]=n[r],a._disData[r]=t[r]-n[r],t[r]=n[r]))}},e.prototype.update=function(){var t=this;if(t._isFront&&t._delay>0)return void t._delay--;var e=t.currentFrame/t.totalFrames;if(!(e<0||e>1)){t._ease&&(e=t._ease(e));var n=!1;for(var a in t._disData)n=!0,t.target[a]=t._startData[a]+t._disData[a]*e;if(!n)return void i.kill(t.instanceId);t._update&&t._update(e);var o=t._completeFun,r=t._cParams;t._isFront?++t.currentFrame>t.totalFrames&&(t._loop?t.currentFrame=1:t._isLoop>0?(t._isFront=!1,t.currentFrame=t.totalFrames,t._isLoop--):i.kill(t.instanceId),o&&o(r)):--t.currentFrame<0&&(t._isLoop>0?(t._isFront=!0,t.currentFrame=1):i.kill(t.instanceId),o&&o(r))}},e.prototype.destroy=function(){var t=this;t._update=null,t._completeFun=null,t._ease=null},e}(t.AObject);t.TweenObj=n;var i=function(){function i(){}return i.to=function(t,e,n){return i.createTween(t,e,n,!0)},i.from=function(t,e,n){return i.createTween(t,e,n,!1)},i.createTween=function(e,a,o,r){for(var s,l=i._tweenList.length,u=0;u<l;u++)if(s=i._tweenList[u],e==s.target)for(var c in s._startData)void 0!=o[c]&&(delete s._startData[c],delete s._disData[c]);return l=i._tweenPool.length,l>0?(s=i._tweenPool.shift(),s._instanceId=t.AObject._object_id++):s=new n,i._tweenList.push(s),s.init(e,a,o,r),s.instanceId},i.killAll=function(){for(var t,e=i._tweenList.length,n=0;n<e;n++)t=i._tweenList[n],t.target=null,t._completeFun=null,t._cParams=null,t._update=null,t._ease=null,t._loop=!1,i._tweenPool.push(t);i._tweenList.length=0},i.kill=function(t){for(var e,n=i._tweenList.length,a=0;a<n;a++)if(e=i._tweenList[a],e.instanceId==t){e.target=null,e._completeFun=null,e._cParams=null,e._update=null,e._ease=null,e._loop=null,i._tweenPool.push(e),i._tweenList.splice(a,1);break}},i.quadraticIn=function(t){return t*t},i.quadraticOut=function(t){return t*(2-t)},i.quadraticInOut=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},i.cubicIn=function(t){return t*t*t},i.cubicOut=function(t){return--t*t*t+1},i.cubicInOut=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},i.quarticIn=function(t){return t*t*t*t},i.quarticOut=function(t){return 1- --t*t*t*t},i.quarticInOut=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},i.quinticIn=function(t){return t*t*t*t*t},i.quinticOut=function(t){return--t*t*t*t*t+1},i.quinticInOut=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},i.sinusoidalIn=function(t){return 1-Math.cos(t*Math.PI/2)},i.sinusoidalOut=function(t){return Math.sin(t*Math.PI/2)},i.sinusoidalInOut=function(t){return.5*(1-Math.cos(Math.PI*t))},i.exponentialIn=function(t){return 0===t?0:Math.pow(1024,t-1)},i.exponentialOut=function(t){return 1===t?1:1-Math.pow(2,-10*t)},i.exponentialInOut=function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},i.circularIn=function(t){return 1-Math.sqrt(1-t*t)},i.circularOut=function(t){return Math.sqrt(1- --t*t)},i.circularInOut=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},i.elasticIn=function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},i.elasticOut=function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},i.elasticInOut=function(t){return 0===t?0:1===t?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1)},i.backIn=function(t){var e=1.70158;return t*t*((e+1)*t-e)},i.backOut=function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},i.backInOut=function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},i.bounceIn=function(t){return 1-i.bounceOut(1-t)},i.bounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},i.bounceInOut=function(t){return t<.5?.5*i.bounceIn(2*t):.5*i.bounceOut(2*t-1)+.5},i.flush=function(){if(e)for(var t=i._tweenList.length,n=t-1;n>=0;n--)i._tweenList[n]?i._tweenList[n].update():i._tweenList.splice(n,1);e=!e},i._tweenPool=[],i._tweenList=[],i}();t.Tween=i}(annie||(annie={}));var annie;!function(t){var e=t.Sprite,n=t.Shape,i=function(i){function a(a,o,r,s){void 0===s&&(s=!0),i.call(this),this.isVertical=!0,this.viewWidth=0,this.viewHeight=0,this._tweenId=0,this.maxDistance=1040,this.distance=0,this.minDis=2,this.maskObj=new n,this.view=new e,this.lastValue=0,this.speed=0,this.addSpeed=0,this.isStop=!0,this.maxSpeed=100,this.fSpeed=20,this.paramXY="y",this.stopTimes=-1,this.isMouseDownState=0,this.autoScroll=!1;var l=this;l._instanceType="annie.ScrollPage",l.addChild(l.maskObj),l.addChild(l.view),l.view.mask=l.maskObj,l.maskObj._isUseToMask=!1,l.maskObj.alpha=0,l.maxDistance=r,l.setViewRect(a,o,s),l.addEventListener(t.MouseEvent.MOUSE_MOVE,l.onMouseEvent.bind(l)),l.addEventListener(t.MouseEvent.MOUSE_UP,l.onMouseEvent.bind(l)),l.addEventListener(t.MouseEvent.MOUSE_OUT,l.onMouseEvent.bind(l)),l.addEventListener(t.Event.ENTER_FRAME,function(){var t=l.view;if(!l.autoScroll)if(l.isStop)l.stopTimes>=0&&++l.stopTimes>=15&&(l.speed=0,(t[l.paramXY]>0||t[l.paramXY]<l.distance-l.maxDistance)&&(l.isStop=!1,l.stopTimes=-1));else if(Math.abs(l.speed)>0)t[l.paramXY]+=l.speed,t[l.paramXY]>0||t[l.paramXY]<l.distance-l.maxDistance?l.speed+=l.addSpeed*l.fSpeed:l.speed+=l.addSpeed,l.speed*l.addSpeed>0&&(l.dispatchEvent("onScrollStop"),l.speed=0);else if(0!=l.addSpeed){if(t[l.paramXY]>0||t[l.paramXY]<l.distance-l.maxDistance){var e=0;l.addSpeed>0&&l.distance<l.maxDistance&&(e=l.distance-l.maxDistance),t[l.paramXY]+=.4*(e-t[l.paramXY]),Math.abs(e-t[l.paramXY])<.1&&(l.isStop=!0,l.addSpeed>0?l.dispatchEvent("onScrollToEnd"):l.dispatchEvent("onScrollToHead"))}}else l.isStop=!0})}return __extends(a,i),a.prototype.setViewRect=function(t,e,n){var i=this;i.maskObj.clear(),i.maskObj.beginFill("#000000"),i.maskObj.drawRect(0,0,t,e),i.viewWidth=t,i.viewHeight=e,i.maskObj.endFill(),i.isVertical=n,n?(i.distance=i.viewHeight,i.paramXY="y"):(i.distance=i.viewWidth,i.paramXY="x"),i.isVertical=n},a.prototype.onMouseEvent=function(e){var n=this,i=n.view;if(e.type==t.MouseEvent.MOUSE_MOVE){if(n.isMouseDownState<1)return n.isStop||(n.isStop=!0),n.autoScroll&&(n.autoScroll=!1,t.Tween.kill(n._tweenId)),n.isVertical?n.lastValue=e.localY:n.lastValue=e.localX,n.speed=0,void(n.isMouseDownState=1);1==n.isMouseDownState&&n.dispatchEvent("onScrollStart"),n.isMouseDownState=2;var a=void 0;if(a=n.isVertical?e.localY:e.localX,n.speed=a-n.lastValue,n.speed>n.minDis?(n.addSpeed=-2,n.speed>n.maxSpeed&&(n.speed=n.maxSpeed)):n.speed<-n.minDis?(n.speed<-n.maxSpeed&&(n.speed=-n.maxSpeed),n.addSpeed=2):n.speed=0,0!=n.speed){var o=1;(i[n.paramXY]>0||i[n.paramXY]<n.distance-n.maxDistance)&&(o=.2),i[n.paramXY]+=(a-n.lastValue)*o}n.lastValue=a,n.stopTimes=0}else n.isStop=!1,n.stopTimes=-1,0==n.speed&&2==n.isMouseDownState&&n.dispatchEvent("onScrollStop"),n.isMouseDownState=0},a.prototype.scrollTo=function(e,n){void 0===n&&(n=0);var i=this,a="x"==i.paramXY?i.viewWidth:i.viewHeight;if(e<0?e=0:e>i.maxDistance-a&&(e=i.maxDistance-a),Math.abs(i.view[i.paramXY]+e)>2){i.autoScroll=!0,i.isStop=!0,i.isMouseDownState=0;var o={};o.onComplete=function(){i.autoScroll=!1},o[i.paramXY]=-e,i._tweenId=t.Tween.to(i.view,n,o),0==i.speed&&i.dispatchEvent("onScrollStart")}},a.prototype.destroy=function(){var t=this;t.maskObj=null,t.view=null,i.prototype.destroy.call(this)},a}(e);t.ScrollPage=i}(annie||(annie={}));var annie;!function(t){var e=t.Sprite,n=function(e){function n(n,i,a,o){void 0===a&&(a=!0),void 0===o&&(o=null),e.call(this),this.listLen=0,this.view=new t.Sprite,this.maskObj=new t.Shape,this.slideSpeed=.2,this._isBreak=!1,this.distance=0,this.touchEndX=0,this.movingX=0,this.movingY=0,this._moveDis=0,this.touchEndY=0,this.currentPageIndex=0,this.reBound=.3,this.isPageFollowToMove=!1,this.follow=.7,this.isMoving=!1,this.viewWidth=0,this.viewHeight=0,this.pageList=[],this.pageClassList=[],this.lastX=0,this.lastY=0,this.isMouseDown=!1,this.canSlideNext=!0,this.canSlidePrev=!0,this.paramXY="y";var r=this;r.isVertical=a,r._ease=o,a?(r.paramXY="y",r.distance=i):(r.paramXY="x",r.distance=n),r.addChild(r.maskObj),r.addChild(r.view),r.view.mask=r.maskObj,r.maskObj._isUseToMask=!1,r.maskObj.alpha=0,r.setMask(n,i);var s=r.onMouseEvent.bind(r);r.addEventListener(t.MouseEvent.MOUSE_DOWN,s),r.addEventListener(t.MouseEvent.MOUSE_MOVE,s),r.addEventListener(t.MouseEvent.MOUSE_UP,s)}return __extends(n,e),n.prototype.setMask=function(t,e){var n=this;n.maskObj.clear(),n.maskObj.beginFill("#000000"),n.maskObj.drawRect(0,0,t,e),n.viewWidth=t,n.viewHeight=e,n.maskObj.endFill()},n.prototype.onMouseEvent=function(e){var n=this;if(!n.isMoving)if(e.type==t.MouseEvent.MOUSE_DOWN)n.touchEndX=e.localX,n.touchEndY=e.localY,n.movingX=n.movingY=0,n.isMouseDown=!0,n._isBreak=!1,n.lastX=e.localX,n.lastY=e.localY,n._moveDis=0;else if(e.type==t.MouseEvent.MOUSE_MOVE){if(!n.isMouseDown)return;var i=e.localX-n.touchEndX,a=e.localY-n.touchEndY,o=a,r=i,s=n.movingY;if(n._moveDis=n.lastY-e.localY,n.movingX=i,n.movingY=a,n.isVertical||(o=i,r=a,s=n.movingX,n._moveDis=n.lastX-e.localX),Math.abs(o)>Math.abs(r)){if(n.isPageFollowToMove||Math.abs(o)-Math.abs(s)<-1&&(n._isBreak=!0),o>0){if(0==n.currentPageIndex)n.view[n.paramXY]-=n._moveDis*n.reBound;else if(n.isPageFollowToMove){n.view[n.paramXY]-=n._moveDis*n.follow;var l=n.currentPageIndex-1;n.pageList[l]||(n.pageList[l]=new n.pageClassList[l]),n.pageList[l].parent!=n.view&&(n.view.addChild(n.pageList[l]),n.pageList[l][n.paramXY]=l*n.distance)}}else if(o<0)if(n.currentPageIndex==n.listLen-1)n.view[n.paramXY]-=n._moveDis*n.reBound;else if(n.isPageFollowToMove){n.view[n.paramXY]-=n._moveDis*n.follow;var l=n.currentPageIndex+1;n.pageList[l]||(n.pageList[l]=new n.pageClassList[l]),n.pageList[l].parent!=n.view&&(n.view.addChild(n.pageList[l]),n.pageList[l][n.paramXY]=l*n.distance)}}else n.movingX=n.movingY=0;n.lastX=e.localX,n.lastY=e.localY}else if(e.type==t.MouseEvent.MOUSE_UP){if(!n.isMouseDown)return;var o=n.movingY,r=n.movingX;if(n.isMouseDown=!1,n.isVertical||(o=n.movingX,r=n.movingY),0==n.currentPageIndex&&n.view[n.paramXY]>0||n.currentPageIndex==n.listLen-1&&n.view[n.paramXY]<-n.currentPageIndex*n.distance){var u={};u[n.paramXY]=-n.currentPageIndex*n.distance,n._ease&&(u.ease=n._ease),t.Tween.to(n.view,n.slideSpeed*n.reBound,u)}else{var c=n.currentPageIndex;if(n.isPageFollowToMove)if(Math.abs(n._moveDis)>5||Math.abs(o*n.follow<<1)>=n.distance)n.slideTo(o<0?c+1:c-1);else{var h=-n.currentPageIndex*n.distance;if(h==n.view[n.paramXY])return;n.view.mouseEnable=!1,n.isMoving=!0;var u={};u[n.paramXY]=h,n._ease&&(u.ease=n._ease),u.onComplete=function(){n.view.mouseEnable=!0,n.isMoving=!1,n.currentPageIndex>0&&n.pageList[n.currentPageIndex-1]&&n.pageList[n.currentPageIndex-1].parent==n.view&&n.view.removeChild(n.pageList[n.currentPageIndex-1]),n.currentPageIndex<n.listLen-1&&n.pageList[n.currentPageIndex+1]&&n.pageList[n.currentPageIndex+1].parent==n.view&&n.view.removeChild(n.pageList[n.currentPageIndex+1])},t.Tween.to(n.view,.5*n.slideSpeed,u)}else Math.abs(o)>100&&!n._isBreak&&n.slideTo(o<0?c+1:c-1)}}},n.prototype.slideTo=function(e,n){void 0===n&&(n=!1);var i=this;if(!i.isMoving&&i.currentPageIndex!=e){var a=i.currentPageIndex,o=i.currentPageIndex<e;if(o){if(!(e<i.listLen&&i.canSlideNext))return;i.currentPageIndex=e}else{if(!(e>=0&&i.canSlidePrev))return;i.currentPageIndex=e}if(i.pageList[i.currentPageIndex]||(i.pageList[i.currentPageIndex]=new i.pageClassList[i.currentPageIndex]),i.pageList[i.currentPageIndex][i.paramXY]=i.currentPageIndex*i.distance,i.pageList[a][i.paramXY]=o?(i.currentPageIndex-1)*i.distance:(i.currentPageIndex+1)*i.distance,i.isPageFollowToMove||(i.view[i.paramXY]=-i.pageList[a][i.paramXY]),i.pageList[i.currentPageIndex]!=i.view&&i.view.addChild(i.pageList[i.currentPageIndex]),n)i.dispatchEvent("onSlideStart",{currentPage:i.currentPageIndex,lastPage:a}),i.view[i.paramXY]=-i.currentPageIndex*i.distance,i.view.removeChild(i.pageList[a]),i.dispatchEvent("onSlideEnd");else{i.view.mouseEnable=!1,i.isMoving=!0;var r={};r[i.paramXY]=-i.currentPageIndex*i.distance,i._ease&&(r.ease=i._ease),r.onComplete=function(){i.view.mouseEnable=!0,i.isMoving=!1,i.view.removeChild(i.pageList[a]),i.dispatchEvent("onSlideEnd")},t.Tween.to(i.view,i.slideSpeed,r),i.dispatchEvent("onSlideStart",{currentPage:i.currentPageIndex,lastPage:a})}}},n.prototype.addPageList=function(t){var e=this;if(e.pageClassList=e.pageClassList.concat(t),0==e.listLen&&e.pageClassList.length>0){var n=new e.pageClassList[0];e.pageList.push(n),e.view.addChild(n)}e.listLen=e.pageClassList.length},n.prototype.destroy=function(){var t=this;t.pageList=null,t.pageClassList=null,e.prototype.destroy.call(this)},n}(e);t.SlidePage=n}(annie||(annie={}));var annie;!function(t){var e=function(t){function e(e,n){void 0===e&&(e=0),void 0===n&&(n=0),t.call(this),this.x=0,this.y=0;var i=this;i._instanceType="annie.Point",i.x=e,i.y=n}return __extends(e,t),e.prototype.destroy=function(){},e.distance=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=t.length;return 4==n?Math.sqrt((t[0]-t[2])*(t[0]-t[2])+(t[1]-t[3])*(t[1]-t[3])):2==n?Math.sqrt((t[0].x-t[1].x)*(t[0].x-t[1].x)+(t[0].y-t[1].y)*(t[0].y-t[1].y)):void 0},e}(t.AObject);t.Point=e}(annie||(annie={}));var annie;!function(t){var e=function(e){function n(n){e.call(this,n),this.clientPoint1=new t.Point,this.clientPoint2=new t.Point,this.scale=0,this.rotate=0,this._instanceType="annie.TouchEvent"}return __extends(n,e),n.prototype.updateAfterEvent=function(){this.target.stage._cp=!0},n.prototype.destroy=function(){var t=this;t.clientPoint1=null,t.clientPoint2=null,e.prototype.destroy.call(this)},n.ON_MULTI_TOUCH="onMultiTouch",n}(t.Event);t.TouchEvent=e}(annie||(annie={}));var annie;!function(t){var e=function(e){function n(i,a,o,r,s,l,u){void 0===a&&(a=640),void 0===o&&(o=960),void 0===r&&(r=640),void 0===s&&(s=1040),void 0===l&&(l=30),void 0===u&&(u="fixedHeight"),e.call(this),this.renderObj=null,this.viewRect=new t.Rectangle,this.isMultiTouch=!1,this.isMultiMouse=!1,this.desWidth=0,this.desHeight=0,this.divHeight=0,this.divWidth=0,this.bgColor="",this._scaleMode="onScale",this._flush=0,this._currentFlush=0,this._lastDpList={},this._ml=[],this._mp=[],this._mouseDownPoint={},this._mouseEventTypes={mousedown:"onMouseDown",mouseup:"onMouseUp",mousemove:"onMouseMove",touchstart:"onMouseDown",touchmove:"onMouseMove",touchend:"onMouseUp"},this.muliPoints=[],this._mP1=new t.Point,this._mP2=new t.Point,this._onMouseEvent=function(e){var i=this,a=n._dragDisplay;if(i.isMultiTouch&&e.targetTouches&&e.targetTouches.length>1){if(2==e.targetTouches.length){i._mP1.x=e.targetTouches[0].pageX-e.target.offsetLeft,i._mP1.y=e.targetTouches[0].pageY-e.target.offsetTop,i._mP2.x=e.targetTouches[1].pageX-e.target.offsetLeft,i._mP2.y=e.targetTouches[1].pageY-e.target.offsetTop;var o=Math.atan2(i._mP1.y-i._mP2.y,i._mP1.x-i._mP2.x)/Math.PI*180,r=t.Point.distance(i._mP1,i._mP2);if(i.muliPoints.push({p1:i._mP1,p2:i._mP2,angle:o,dis:r}),i.muliPoints.length>=2){i._touchEvent||(i._touchEvent=new t.TouchEvent(t.TouchEvent.ON_MULTI_TOUCH),i._touchEvent.target=i);var s=i.muliPoints.length;i._touchEvent.rotate=2*(i.muliPoints[s-1].angle-i.muliPoints[s-2].angle),i._touchEvent.scale=(i.muliPoints[s-1].dis-i.muliPoints[s-2].dis)/(i.divHeight>i.divWidth?i.desWidth:i.desHeight)*4,i._touchEvent.clientPoint1.x=i.muliPoints[s-1].p1.x,i._touchEvent.clientPoint2.x=i.muliPoints[s-1].p2.x,i._touchEvent.clientPoint1.y=i.muliPoints[s-1].p1.y,i._touchEvent.clientPoint2.y=i.muliPoints[s-1].p2.y,i.dispatchEvent(i._touchEvent),i.muliPoints.shift()}}else i.muliPoints.length=0;a&&(a._lastDragPoint.x=Number.MAX_VALUE,a._lastDragPoint.y=Number.MAX_VALUE),i._mouseDownPoint={},i._lastDpList={}}else if(i.muliPoints.length>0&&(i._touchEvent.rotate=0,i._touchEvent.scale=0,i._touchEvent.clientPoint1.x=0,i._touchEvent.clientPoint2.x=0,i._touchEvent.clientPoint1.y=0,i._touchEvent.clientPoint2.y=0,i.dispatchEvent(i._touchEvent),i.muliPoints.length=0),t.EventDispatcher._totalMEC>0){var l,u=void 0,c=i._mouseEventTypes[e.type],h=void 0,d=void 0,p=void 0,_=void 0,f=void 0,g=void 0;u=i.isMultiMouse?e.changedTouches:[e.changedTouches[0]];for(var v=0;v<u.length;v++)if(f=0,h=[],g=u[v].identifier,_=i._mp.length>0?i._mp.shift():new t.Point,_.x=u[v].pageX,_.y=u[v].pageY,d=i.globalToLocal(_,t.DisplayObject._bp),t.EventDispatcher.getMouseEventCount()>0&&(i._ml[f]?(l=i._ml[f],l.type=c):(l=new t.MouseEvent(c),i._ml[f]=l),h[h.length]=l,i._initMouseEvent(l,_,d,g),f++),"onMouseDown"==c?i._mouseDownPoint[g]=_:"onMouseUp"==c&&i._mouseDownPoint[g]&&t.Point.distance(i._mouseDownPoint[g],_)<20&&t.EventDispatcher.getMouseEventCount("onMouseClick")>0&&(i._ml[f]?(l=i._ml[f],l.type="onMouseClick"):(l=new t.MouseEvent("onMouseClick"),i._ml[f]=l),h[h.length]=l,i._initMouseEvent(l,_,d,g),f++),f>0){var m=i.hitTestPoint(_,!0),y=[];if(m)for(;m;)!1===m.mouseChildren&&(y.length=0),y[y.length]=m,m=m.parent;else y[y.length]=i;for(var s=y.length,b=0;b<s;b++){m=y[b];for(var P=f-1;P>=0;P--)!1===h[P]._pd&&m.hasEventListener(h[P].type)&&(h[P].currentTarget=m,h[P].target=y[0],p=m.globalToLocal(_,t.DisplayObject._bp),h[P].localX=p.x,h[P].localY=p.y,m.dispatchEvent(h[P]))}if(y.reverse(),"onMouseDown"!=c){if((t.EventDispatcher.getMouseEventCount("onMouseOver")>0||t.EventDispatcher.getMouseEventCount("onMouseOut")>0)&&i._lastDpList[g]){var x=i._lastDpList[g].length,w=y.length;s=x>w?x:w;for(var M=!1,E=void 0,S=void 0,b=1;b<s;b++)M||i._lastDpList[g][b]!=y[b]&&(M=!0,i._ml[f]?(E=i._ml[f],E.type="onMouseOver"):(E=new t.MouseEvent("onMouseOver"),i._ml[f]=E),i._initMouseEvent(E,_,d,g),f++,i._ml[f]?(S=i._ml[f],S.type="onMouseOut"):(S=new t.MouseEvent("onMouseOut"),i._ml[f]=S),i._initMouseEvent(S,_,d,g)),M&&(i._lastDpList[g][b]&&!1===S._pd&&(m=i._lastDpList[g][b],m.hasEventListener("onMouseOut")&&(S.currentTarget=m,S.target=i._lastDpList[g][x-1],p=m.globalToLocal(_,t.DisplayObject._bp),S.localX=p.x,S.localY=p.y,m.dispatchEvent(S))),y[b]&&!1===E._pd&&(m=y[b],m.hasEventListener("onMouseOver")&&(E.currentTarget=m,E.target=y[w-1],p=m.globalToLocal(_,t.DisplayObject._bp),E.localX=p.x,E.localY=p.y,m.dispatchEvent(E))))}i._mp[i._mp.length]=_}if(a&&a.stage&&a.parent){var L=a.x,T=a.y;p=a.parent.globalToLocal(_,t.DisplayObject._bp),a._isDragCenter?(L=p.x,T=p.y):(a._lastDragPoint.x!=Number.MAX_VALUE&&(L+=p.x-a._lastDragPoint.x,T+=p.y-a._lastDragPoint.y),a._lastDragPoint.x=p.x,a._lastDragPoint.y=p.y),p.x=L,p.y=T,0!=a._dragBounds.width&&(a._dragBounds.isPointIn(p)||(L<a._dragBounds.x?L=a._dragBounds.x:L>a._dragBounds.x+a._dragBounds.width&&(L=a._dragBounds.x+a._dragBounds.width),T<a._dragBounds.y?T=a._dragBounds.y:T>a._dragBounds.y+a._dragBounds.height&&(T=a._dragBounds.y+a._dragBounds.height))),a.x=L,a.y=T}"onMouseUp"==c?(a&&(a._lastDragPoint.x=Number.MAX_VALUE,a._lastDragPoint.y=Number.MAX_VALUE),delete i._mouseDownPoint[g],delete i._lastDpList[g]):i._lastDpList[g]=y}}i._cp&&i.update()},this.setAlign=function(){var t=this,e=t.divHeight,n=t.divWidth,i=t.desHeight,a=t.desWidth;t.anchorX=a>>1,t.anchorY=i>>1;var o=e>n,r=i>a,s=1,l=1;if(t.x=n-a>>1,t.y=e-i>>1,t.autoSteering&&r!=o){var u=e;e=n,n=u}if("noScale"!=t._scaleMode)switch(s=e/i,l=n/a,t._scaleMode){case"noBorder":l>s?s=l:l=s;break;case"showAll":l<s?s=l:l=s;break;case"fixedWidth":s=l;break;case"fixedHeight":l=s}t.scaleX=l,t.scaleY=s,t.viewRect.x=a-n/l>>1,t.viewRect.y=i-e/s>>1,t.viewRect.width=a-2*t.viewRect.x,t.viewRect.height=i-2*t.viewRect.y,t.rotation=r==o?0:i>a?-90:90};var c=this;this._instanceType="annie.Stage",c.stage=this,c.name="stageInstance"+c._instanceId,c.desWidth=r,c.desHeight=s,c.divWidth=a,c.divHeight=o,c.setFrameRate(l),c.anchorX=r>>1,c.anchorY=s>>1,c.renderObj=new t.CanvasRender(c,i),n.addUpdateObj(c),c.onTouchEvent=c._onMouseEvent.bind(c),c._scaleMode=u,c.setAlign()}return __extends(n,e),Object.defineProperty(n,"pause",{get:function(){return this._pause},set:function(e){var n=this;n._pause=e,e?t.Sound.stopAllSounds():t.Sound.resumePlaySounds(),e!=n._pause&&t.globalDispatcher.dispatchEvent("onRunChanged",{pause:e})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){var e=this;t!=e._scaleMode&&(e._scaleMode=t,e.setAlign())},enumerable:!0,configurable:!0}),n.prototype.update=function(t){void 0===t&&(t=!0);e.prototype.update.call(this,t)},n.prototype.render=function(t){t.begin(),e.prototype.render.call(this,t),t.end()},n.prototype._initMouseEvent=function(t,e,n,i){t._pd=!1,t.clientX=e.x,t.clientY=e.y,t.stageX=n.x,t.stageY=n.y,t.identifier=i},n.prototype.flush=function(){var t=this;0==t._flush?(t.update(!0),t.render(t.renderObj)):0==t._currentFlush?(t.update(!0),t.render(t.renderObj),t._currentFlush=t._flush):t._currentFlush--},n.prototype.setFrameRate=function(t){var e=this;e._flush=60/t-1>>0,e._flush<0&&(e._flush=0)},n.prototype.getFrameRate=function(){return 60/(this._flush+1)},n.prototype.kill=function(){n.removeUpdateObj(this)},n.prototype.getBounds=function(){return this.viewRect},n.flushAll=function(){setInterval(function(){if(!n._pause)for(var t=n.allUpdateObjList.length,e=0;e<t;e++)n.allUpdateObjList[e]&&n.allUpdateObjList[e].flush()},16)},n.addUpdateObj=function(t){for(var e=!1,i=n.allUpdateObjList.length,a=0;a<i;a++)if(n.allUpdateObjList[a]===t){e=!0;break}e||n.allUpdateObjList.unshift(t)},n.removeUpdateObj=function(t){for(var e=n.allUpdateObjList.length,i=0;i<e;i++)if(n.allUpdateObjList[i]===t){n.allUpdateObjList.splice(i,1);break}},n.prototype.destroy=function(){var t=this;n.removeUpdateObj(t),t.renderObj=null,t.viewRect=null,t._lastDpList=null,t._touchEvent=null,t.muliPoints=null,t._mP1=null,t._mP2=null,t._ml=null,e.prototype.destroy.call(this)},n._pause=!1,n._dragDisplay=null,n.allUpdateObjList=[],n}(t.Sprite);t.Stage=e}(annie||(annie={}));var annie;!function(t){var e=function(e){function n(){e.call(this),this._curFrame=1,this._lastFrameObj=null,this._isPlaying=!0,this._isFront=!0,this._lastFrame=0,this._a2x_script=null,this._isButton=!1,this._clicked=!1,this._mouseEvent=function(t){var e=this;if(!e._clicked){var n=2;"onMouseDown"==t.type?e._currentFrame>2&&(n=3):n=1,e.gotoAndStop(n)}},this._maskList=[];var t=this;t._instanceType="annie.MovieClip",null==t._a2x_res_class&&(t._a2x_res_class={tf:1})}return __extends(n,e),Object.defineProperty(n.prototype,"currentFrame",{get:function(){return this._curFrame},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isFront",{get:function(){return this._isFront},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"totalFrames",{get:function(){return this._a2x_res_class.tf},enumerable:!0,configurable:!0}),n.prototype.stop=function(){this._isPlaying=!1},n.prototype.addFrameScript=function(t,e){var n=this;void 0==n._a2x_script&&(n._a2x_script={}),n._a2x_script[t]=e},n.prototype.removeFrameScript=function(t){var e=this;void 0!=e._a2x_script&&(e._a2x_script[t]=null)},Object.defineProperty(n.prototype,"isButton",{get:function(){return this._isButton},enumerable:!0,configurable:!0}),n.prototype.initButton=function(){var t=this;!t._isButton&&t._a2x_res_class.tf>1&&(t.mouseChildren=!1,t.addEventListener("onMouseDown",t._mouseEvent.bind(t)),t.addEventListener("onMouseUp",t._mouseEvent.bind(t)),t.addEventListener("onMouseOut",t._mouseEvent.bind(t)),t.gotoAndStop(1),t._isButton=!0)},Object.defineProperty(n.prototype,"clicked",{get:function(){return this._clicked},set:function(t){var e=this;t!=e._clicked&&(t&&e._mouseEvent({type:"onMouseDown"}),e._clicked=t)},enumerable:!0,configurable:!0}),n.prototype.getCurrentLabel=function(){return""},n.prototype.nextFrame=function(){var t=this;t._curFrame<t.totalFrames&&t._curFrame++,t._isPlaying=!1},n.prototype.prevFrame=function(){var t=this;t._curFrame>1&&t._curFrame--,t._isPlaying=!1},n.prototype.gotoAndStop=function(t){var e=this;e._isPlaying=!1;var n=e._a2x_res_class;"string"==typeof t?t=void 0!=n.label[t]?n.label[t]:e._curFrame:"number"==typeof t&&(t>n.tf&&(t=n.tf),t<1&&(t=1)),e._curFrame=t},n.prototype.play=function(t){void 0===t&&(t=!0);var e=this;e._isPlaying=!0,e._isFront=t},n.prototype.gotoAndPlay=function(t,e){void 0===e&&(e=!0);var n=this;n._isFront=e,n._isPlaying=!0;var i=n._a2x_res_class;"string"==typeof t?t=void 0!=i.label[t]?i.label[t]:n._curFrame:"number"==typeof t&&(t>i.tf&&(t=i.tf),t<1&&(t=1)),n._curFrame=t},n.prototype.update=function(n){void 0===n&&(n=!0);var i=this;if(n&&i._a2x_res_class.tf>1){var a=!1;if(i._lastFrame!=i._curFrame?(a=!0,i._lastFrame=i._curFrame):i._isPlaying&&(a=!0,i._isFront?++i._curFrame>i._a2x_res_class.tf&&(i._curFrame=1):--i._curFrame<1&&(i._curFrame=i._a2x_res_class.tf),i._lastFrame=i._curFrame),a){var o=i._a2x_res_children,r=i._a2x_res_class,s=null,l=i._lastFrameObj;if(r.timeLine[i._curFrame-1]>=0&&(s=r.f[r.timeLine[i._curFrame-1]]),l!=s){if(l){var u=null;u=l.c?l.c:{};var c=null;c=s&&s.c?s.c:{};for(var h in u)void 0==c[h]&&i.removeChild(o[u[h].o-1]);for(var h in c)if(void 0==u[h])if(void 0==c[h].at)i.addChildAt(o[c[h].o-1],0);else if(0==c[h].at)i.addChild(o[c[h].o-1]);else for(var d=0;d<i.children.length;d++)if(i.children[d]==o[c[h].at-1]){i.addChildAt(o[c[h].o-1],d);break}}else if(s.c)for(var d in s.c)i.addChildAt(o[s.c[d].o-1],0);if(s){i._maskList.length=0;var p=i._maskList;if(s.c)for(var d in s.c)t.d(o[s.c[d].o-1],s.c[d]),void 0!=s.c[d].ma&&(s.c[d].ma!=s.c[d].o&&p.push(o[s.c[d].ma-1],o[s.c[d].o-1]),o[s.c[d].o-1]._isUseToMask=!0),void 0!=s.c[d].n&&(i[s.c[d].n]=o[s.c[d].o-1],o[s.c[d].o-1].name=s.c[d].n);if(p.length>0)for(var _=!1,d=0;d<i.children.length;d++){if(i.children[d]==p[0])_=!0;else if(i.children[d]==p[1]&&(_=!1,p.splice(0,2),0==p.length))break;_&&(i.children[d].mask=p[1])}}}i._lastFrameObj=s;var f=i._curFrame-1,g=r.s[f];if(g)for(var v in g)o[v-1]._repeatCount=g[v],o[v-1].play();var m=!1;if(i._a2x_script&&void 0!=(g=i._a2x_script[f])&&(null!=g&&g(),m=!0),m||(g=r.a[f])&&i[g[0]](g[1]),i.hasEventListener(t.Event.CALL_FRAME)&&(g=r.e[f]))for(var d=0;d<g.length;d++)i.dispatchEvent(t.Event.CALL_FRAME,{frameIndex:i._curFrame,frameName:g[d]});(1==i._curFrame&&!i._isFront||i._curFrame==i._a2x_res_class.tf&&i._isFront)&&i.hasEventListener(t.Event.END_FRAME)&&i.dispatchEvent(t.Event.END_FRAME,{frameIndex:i._curFrame,frameName:"endFrame"})}}e.prototype.update.call(this,n)},n.prototype.destroy=function(){var t=this;t._lastFrameObj=null,t._a2x_script=null,t._maskList=null,e.prototype.destroy.call(this)},n}(t.Sprite);t.MovieClip=e}(annie||(annie={}));var annie;!function(t){var e=function(e){function n(){e.call(this),this._textAlign="left",this._textAlpha=1,this._textHeight=0,this._lineSpacing=14,this._textWidth=120,this._lineType="single",this._textOffX=0,this._text="",this._font="Arial",this._size=12,this._color="#fff",this._italic=!1,this._bold=!1,this._border=!1,this._instanceType="annie.TextField"}return __extends(n,e),Object.defineProperty(n.prototype,"textAlign",{get:function(){return this._textAlign},set:function(t){this._setProperty("_textAlign",t,3)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textAlpha",{get:function(){return this._textAlpha},set:function(t){this._setProperty("_textAlpha",t,3)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textHeight",{get:function(){return this._textHeight},set:function(t){this._setProperty("_textHeight",t,3)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lineSpacing",{get:function(){return this._lineSpacing},set:function(t){this._setProperty("_lineSpacing",t,3)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textWidth",{get:function(){return this._textWidth},set:function(t){this._setProperty("_textWidth",t,3)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lineType",{get:function(){return this._lineType},set:function(t){this._setProperty("_lineType",t,3)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"text",{get:function(){return this._text},set:function(t){this._setProperty("_text",t,3)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"font",{get:function(){
return this._font},set:function(t){this._setProperty("_font",t,3)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this._size},set:function(t){this._setProperty("_size",t,3)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"color",{get:function(){return this._color},set:function(t){this._setProperty("_color",t,3)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"italic",{get:function(){return this._italic},set:function(t){this._setProperty("_italic",t,3)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bold",{get:function(){return this._bold},set:function(t){this._setProperty("_bold",t,3)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"border",{get:function(){return this._border},set:function(t){this._setProperty("_border",t,3)},enumerable:!0,configurable:!0}),n.prototype._draw=function(e){var n=this;e.font=n.fontInfo,e.fillStyle=t.Shape.getRGBA(n._color,n._textAlpha),e.textAlign=n._textAlign,e.textBaseline="top";for(var i=0;i<n.realLines.length;i++)e.fillText(n.realLines[i],n._textOffX,i*n.lineSpacing,n._bounds.width)},n.prototype._getMeasuredWidth=function(e){return t.CanvasRender.drawCtx.measureText(e).width},n.prototype.getTextWidth=function(e){void 0===e&&(e=0);var n=this;return n.update(),t.CanvasRender.drawCtx.measureText(n.realLines[e]).width},Object.defineProperty(n.prototype,"lines",{get:function(){return this.realLines.length},enumerable:!0,configurable:!0}),n.prototype.update=function(n){void 0===n&&(n=!1),e.prototype.update.call(this,n);var i=this;if(i._visible){if(i._UI.UD||i._UI.UF){i._text+="";var a=t.CanvasRender.drawCtx,o=i._text.toString().split(/(?:\r\n|\r|\n)/);i.realLines=[],i.fontInfo=i.size||12,i.fontInfo+="px ",i.fontInfo+=i.font,i._bold&&(i.fontInfo="bold "+i.fontInfo),i._italic&&(i.fontInfo="italic "+i.fontInfo),a.font=i.fontInfo;var r=i._lineSpacing;if(i._text.indexOf("\n")<0&&"single"==i.lineType){i.realLines[i.realLines.length]=o[0];var s=o[0];if(i._getMeasuredWidth(s)>i._textWidth)for(var l=i._getMeasuredWidth(s[0]),u=s[0],c=0,h=s.length,d=1;d<h;d++){if(c=a.measureText(s[d]).width,(l+=c)>i._textWidth){i.realLines[0]=u;break}u+=s[d]}}else for(var p=0,_=o.length;p<_;p++){var s=o[p];if(s){for(var l=i._getMeasuredWidth(s[0]),u=s[0],c=0,h=s.length,d=1;d<h;d++)c=a.measureText(s[d]).width,l+=c,l>i._textWidth?(i.realLines[i.realLines.length]=u,u=s[d],l=c):u+=s[d];i.realLines[i.realLines.length]=u}}var f=r*i.realLines.length,g=i._textWidth;"center"==i._textAlign?i._textOffX=.5*g:"right"==i._textAlign?i._textOffX=g:i._textOffX=0,i._UI.UD=!1,i._bounds.height=f,i._bounds.width=g}i._UI.UM=!1,i._UI.UA=!1,i._UI.UF=!1}},n.prototype.getBounds=function(){return this._bounds},n}(t.DisplayObject);t.TextField=e}(annie||(annie={}));var annie;!function(t){var e=function(e){function n(n){e.call(this);var i=this;i._instanceType="annie.Bitmap",i._texture=n,t.getImageInfo({src:n,success:function(t){i._bounds.width=t.width,i._bounds.height=t.height}})}return __extends(n,e),n.prototype.hitTestPoint=function(t,e){void 0===e&&(e=!1);var n=this;if(e&&!n.mouseEnable)return null;var i=n.globalToLocal(t);return n.getBounds().isPointIn(i)?n:null},n.prototype.destroy=function(){this._texture="",e.prototype.destroy.call(this)},n}(t.DisplayObject);t.Bitmap=e}(annie||(annie={}));var annie;!function(t){function e(e){return!!t.classPool[e]}function n(e){t.classPool[e]=null,delete t.classPool[e]}function i(t,e,n){h[t]={},h[t]._a2x_con=n;for(var i=0;i<e.length;i++)"image"!=e[i].type&&"sound"!=e[i].type||(h[t][e[i].id]=e[i].src);var a;for(var o in n)if(a=n[o],1==a.t){if(!a.f){a.f=[],a.tf=1;continue}if(a.tf>1)for(var r=a.f,s=r.length,l=null,u={},c={},i=0;i<s;i++)if(l=r[i].c){for(var d in l)if(0==i)u[d]=[l[d]][0];else if(3!=l[d].a&&(c[d]=l[d]),1!=l[d].a){if(2==l[d].a)for(var p in u[d])void 0==l[d][p]&&(l[d][p]=u[d][p]);else delete l[d];u[d]=null,delete u[d]}if(i>0){for(var p in u)l[p]=c[p]=u[p];u=c,c={}}}}}function a(t,e){return h[t][e]?h[t][e]:null}function o(e,n){return new t.Bitmap(h[e][n])}function r(t,e){if(t._a2x_res_obj!=e){var n=t._a2x_res_obj;void 0!=e.w&&(t.textWidth=e.w,t.textHeight=e.h),void 0!=e.tr&&1!=e.tr.length||(e.tr=[0,0,1,1,0,0]),n.tr!=e.tr&&(i=e.tr,t.x=i[0],t.y=i[1],t.scaleX=i[2],t.scaleY=i[3],t.skewX=i[4],t.skewY=i[5]),t.alpha=void 0==e.al?1:e.al,1==e.t&&t.initButton&&t.initButton(),t._a2x_res_obj=e;var i}}function s(e,n){var i,a=h[e]._a2x_con[n],o=decodeURIComponent(a[9]),r=decodeURIComponent(a[4]),s=a[5],l=p[a[3]],u=d[a[2]],c=a[11],_=a[10],f=a[6],g=a[7],v=a[12],m=a[8];return 0==a[1]||1==a[1]?(i=new t.TextField,i.text=o,i.font=r,i.size=s,i.textAlign=l,i.lineType=u,i.italic=c,i.bold=_,i.color=f,i.textAlpha=g,i.border=v,i.lineSpacing=m):console.log("wxApp isn't support inputText"),i}function l(e,n){for(var i=h[e]._a2x_con[n][1],a=new t.Shape,o=0;o<i.length;o++)1==i[o][0]?(0==i[o][1]?a.beginFill(t.Shape.getRGBA(i[o][2][0],i[o][2][1])):1==i[o][1]?a.beginLinearGradientFill(i[o][2][0],i[o][2][1]):2==i[o][1]?a.beginRadialGradientFill(i[o][2][0],i[o][2][1]):a.beginBitmapFill(h[e][i[o][2][0]],i[o][2][1]),a.decodePath(i[o][3]),a.endFill()):(0==i[o][1]?a.beginStroke(t.Shape.getRGBA(i[o][2][0],i[o][2][1]),i[o][4],i[o][5],i[o][6],i[o][7]):1==i[o][1]?a.beginLinearGradientStroke(i[o][2][0],i[o][2][1],i[o][4],i[o][5],i[o][6],i[o][7]):2==i[o][1]?a.beginRadialGradientStroke(i[o][2][0],i[o][2][1],i[o][4],i[o][5],i[o][6],i[o][7]):a.beginBitmapStroke(h[e][i[o][2][0]],i[o][2][1],i[o][4],i[o][5],i[o][6],i[o][7]),a.decodePath(i[o][3]),a.endStroke());return a}function u(e,n){return new t.Sound(h[e][n])}function c(e,n,i){var a=t.classPool,d=h[n],p=d._a2x_con,_=p[i];e._a2x_res_class=_;var f,g=!1;if(_.tf>1&&(g=!0,void 0==_.timeLine)){var v=_.f.length,m=[],y=v>0?_.f[0].i:_.tf,b=0;if(y>0)for(var P=0;P<y;P++)m[m.length]=-1;if(v>0)for(f=0;f<v;f++){b=f+1<v?_.f[f+1].i:_.tf,y=_.f[f].i;for(var P=0;P<b-y;P++)m[m.length]=f}_.timeLine=m,_.f||(_.f=[]),_.c||(_.c=[]),_.a||(_.a={}),_.s||(_.s={}),_.e||(_.e={});var x={};if(_.l)for(var w in _.l)for(var M=0;M<_.l[w].length;M++)x[_.l[w][M]]=parseInt(w);else _.l=[];_.label=x}if(_.c){var E=_.c,S=E.length,L=null,T=0,O=null,C=0;for(f=0;f<S;f++){if(0==E[f].indexOf("_$"))switch(T=Array.isArray(p[E[f]])?p[E[f]][0]:p[E[f]].t){case 1:L=p[E[f]].tf>1?new t.MovieClip:new t.Sprite,c(L,n,E[f]);break;case 2:L=o(n,E[f]);break;case 3:L=l(n,E[f]);break;case 4:L=s(n,E[f]);break;case 5:L=u(n,E[f]),e.addSound(L)}else L=new a[n][E[f]];if(e._a2x_res_children[e._a2x_res_children.length]=L,!g){var w=f+1;5==T?L._repeate=_.s[0][w]:(r(L,_.f[0].c[w]),void 0!=_.f[0].c[w].ma?(O=L,C=_.f[0].c[w].ma-1):O&&f<=C&&(L.mask=O,f==C&&(O=null)),void 0!=_.f[0].c[w].n&&(e[_.f[0].c[w].n]=L,L.name=_.f[0].c[w].n),e.addChildAt(L,0))}}}}console.log("AnnieJS:https://github.com/flash2x/annieJS");var h={};t.createAudio=null,t.getImageInfo=null,t.A2xExtend=null,t.classPool=null,t.loadScene=null,t.isLoadedScene=e,t.unLoadScene=n,t.parseScene=i,t.getResource=a,t.d=r;var d=["single","multiline"],p=["left","center","right"];t.initRes=c}(annie||(annie={}));var annie;!function(t){var e=function(e){function n(n){e.call(this),this.media=null,this._loop=0,this.isPlaying=!1;var i=this;i._instanceType="annie.Sound",i.media=t.createAudio(),i.media.src=n,i.media.onEnded=function(){i._loop>1&&(i._loop--,i.media.play())}}return __extends(n,e),n.prototype.play=function(t,e){void 0===t&&(t=0),void 0===e&&(e=1);var n=this;n.media.startTime=t,n._loop=e,n.media.play(),n.isPlaying=!0},n.prototype.stop=function(){var t=this;t.media.stop(),t.isPlaying=!0},n.prototype.pause=function(t){void 0===t&&(t=!0);var e=this;t?(e.media.pause(),e.isPlaying=!1):(e.media.play(),e.isPlaying=!0)},Object.defineProperty(n.prototype,"volume",{get:function(){return this.media.volume},set:function(t){this.media.volume=t},enumerable:!0,configurable:!0}),n.prototype.stop2=function(){var t=this;t.isPlaying&&t.media.pause()},n.prototype.play2=function(){var t=this;t.isPlaying&&t.media.play()},n.stopAllSounds=function(){for(var e=t.Sound._soundList.length,n=e-1;n>=0;n--)t.Sound._soundList[n]?t.Sound._soundList[n].stop2():t.Sound._soundList.splice(n,1)},n.resumePlaySounds=function(){for(var e=t.Sound._soundList.length,n=e-1;n>=0;n--)t.Sound._soundList[n]?t.Sound._soundList[n].play2():t.Sound._soundList.splice(n,1)},n.setAllSoundsVolume=function(e){for(var i=t.Sound._soundList.length,a=i-1;a>=0;a--)t.Sound._soundList[a]?t.Sound._soundList[a].volume=e:t.Sound._soundList.splice(a,1);n._volume=e},n._soundList=[],n._volume=1,n}(t.EventDispatcher);t.Sound=e}(annie||(annie={}));var annie;!function(t){function e(t){switch(t){case a:case-o:return 0;case i:case-i:return-1;case o:case-a:return 0;default:return Math.cos(t)}}function n(t){switch(t){case a:case-o:return 1;case i:case-i:return 0;case o:case-a:return-1;default:return Math.sin(t)}}var i=Math.PI,a=i>>1,o=i+a,r=Math.PI/180,s=function(i){function a(e,n,a,o,r,s){void 0===e&&(e=1),void 0===n&&(n=0),void 0===a&&(a=0),void 0===o&&(o=1),void 0===r&&(r=0),void 0===s&&(s=0),i.call(this),this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.transformPoint=function(e,n,i){void 0===i&&(i=null);var a=this;return i||(i=new t.Point),i.x=e*a.a+n*a.c+a.tx,i.y=e*a.b+n*a.d+a.ty,i},this.prepend=function(t){var e=this,n=t.a,i=t.b,a=t.c,o=t.d,r=t.tx,s=t.ty,l=e.a,u=e.c,c=e.tx;e.a=n*l+a*e.b,e.b=i*l+o*e.b,e.c=n*u+a*e.d,e.d=i*u+o*e.d,e.tx=n*c+a*e.ty+r,e.ty=i*c+o*e.ty+s};var l=this;l._instanceType="annie.Matrix",l.a=e,l.b=n,l.c=a,l.d=o,l.tx=r,l.ty=s}return __extends(a,i),a.prototype.clone=function(){var t=this;return new a(t.a,t.b,t.c,t.d,t.tx,t.ty)},a.prototype.setFrom=function(t){var e=this;e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.tx=t.tx,e.ty=t.ty},a.prototype.identity=function(){var t=this;t.a=t.d=1,t.b=t.c=t.tx=t.ty=0},a.prototype.invert=function(){var t=this,e=new a(t.a,t.b,t.c,t.d,t.tx,t.ty),n=t.a,i=t.b,o=t.c,r=t.d,s=t.tx,l=t.ty;if(0==i&&0==o)return 0==n||0==r?e.a=e.d=e.tx=e.ty=0:(n=e.a=1/n,r=e.d=1/r,e.tx=-n*s,e.ty=-r*l),e;var u=n*r-i*o;if(0==u)return e.identity(),e;u=1/u;var c=e.a=r*u;return i=e.b=-i*u,o=e.c=-o*u,r=e.d=n*u,e.tx=-(c*s+o*l),e.ty=-(i*s+r*l),e},a.prototype.createBox=function(t,i,a,o,s,l,u,c,h){var d=this;if(0!=s?l=u=s%360:(l%=360,u%=360),0==l&&0==u)d.a=a,d.b=d.c=0,d.d=o;else{l*=r,u*=r;var p=e(l),_=n(l);l==u?(d.a=p*a,d.b=_*a):(d.a=e(u)*a,d.b=n(u)*a),d.c=-_*o,d.d=p*o}d.tx=t+c-(c*d.a+h*d.c),d.ty=i+h-(c*d.b+h*d.d)},a.isEqual=function(t,e){return t.tx==e.tx&&t.ty==e.ty&&t.a==e.a&&t.b==e.b&&t.c==e.c&&t.d==e.d},a.prototype.concat=function(t){var e=this,n=e.a,i=e.b,a=e.c,o=e.d,r=e.tx,s=e.ty,l=t.a,u=t.b,c=t.c,h=t.d,d=t.tx,p=t.ty;e.a=n*l+i*c,e.b=n*u+i*h,e.c=a*l+o*c,e.d=a*u+o*h,e.tx=r*l+s*c+d,e.ty=r*u+s*h+p},a.prototype.rotate=function(t){var e=this,n=Math.sin(t),i=Math.cos(t),a=e.a,o=e.b,r=e.c,s=e.d,l=e.tx,u=e.ty;e.a=a*i-o*n,e.b=a*n+o*i,e.c=r*i-s*n,e.d=r*n+s*i,e.tx=l*i-u*n,e.ty=l*n+u*i},a.prototype.scale=function(t,e){var n=this;n.a*=t,n.d*=e,n.c*=t,n.b*=e,n.tx*=t,n.ty*=e},a.prototype.translate=function(t,e){var n=this;n.tx+=t,n.ty+=e},a.prototype.destroy=function(){},a}(t.AObject);t.Matrix=s}(annie||(annie={}));var annie;!function(t){var e=function(t){function e(e,n,i,a){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===a&&(a=0),t.call(this),this.x=0,this.y=0,this.width=0,this.height=0;var o=this;o._instanceType="annie.Rectangle",o.x=e,o.y=n,o.height=a,o.width=i}return __extends(e,t),e.prototype.isPointIn=function(t){var e=this;return t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height},e.createFromRects=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];if(0==t.length)return null;if(1==t.length)return t[0];for(var n=t[0],i=n.x,a=n.y,o=n.width,r=n.height,s=void 0,l=void 0,u=void 0,c=void 0,h=1;h<t.length;h++)s=i+o,u=a+r,l=t[h].x+t[h].width,c=t[h].y+t[h].height,(i>t[h].x||0==s)&&(i=t[h].x),(a>t[h].y||0==u)&&(a=t[h].y),s<l&&(s=l),u<c&&(u=c),n.x=i,n.y=a,n.width=s-i,n.height=u-a;return n},e.createFromPoints=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=e[0].x,a=e[0].y,o=e[0].x,r=e[0].y,s=1;s<e.length;s++)null!=e[s]&&(i>e[s].x&&(i=e[s].x),a>e[s].y&&(a=e[s].y),o<e[s].x&&(o=e[s].x),r<e[s].y&&(r=e[s].y));return t.x=i,t.y=a,t.width=o-i,t.height=r-a,t},e.createRectform2Point=function(t,e,n){var i=e.x,a=e.y,o=e.x,r=e.y;i>n.x&&(i=n.x),a>n.y&&(a=n.y),o<n.x&&(o=n.x),r<n.y&&(r=n.y),t.x=i,t.y=a,t.width=o-i,t.height=r-a},e.testRectCross=function(t,e){var n,i,a,o;return n=t.x+t.width/2,i=t.y+t.height/2,a=e.x+e.width/2,o=e.y+e.height/2,Math.abs(n-a)<=t.width/2+e.width/2&&Math.abs(i-o)<=t.height/2+e.height/2},e.prototype.destroy=function(){},e}(t.AObject);t.Rectangle=e}(annie||(annie={}));var annie;!function(t){var e=function(t){function e(n,i){t.call(this);var a=this;a._instanceType="annie.CanvasRender",a._stage=n,e.drawCtx=i}return __extends(e,t),e.prototype.begin=function(){e.drawCtx.setTransform(1,0,0,1,0,0)},e.prototype.beginMask=function(t){var n=e.drawCtx,i=t.cMatrix;n.save(),n.globalAlpha=0,n.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),t._draw(n),n.clip()},e.prototype.endMask=function(){e.drawCtx.restore()},e.prototype.end=function(){e.drawCtx.draw()},e.prototype.draw=function(t){if(!t._cp){var n=e.drawCtx;n.globalAlpha=t.cAlpha;var i=t.cMatrix;n.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty);var a=t._texture;a?n.drawImage(a,0,0):t._draw(n)}},e.prototype.destroy=function(){this._stage=null},e.drawCtx=null,e}(t.AObject);t.CanvasRender=e}(annie||(annie={}));var annie;!function(t){var e=function(e){function n(){e.call(this),this._UI={UD:!1,UM:!0,UA:!0,UF:!1},this.stage=null,this.parent=null,this.cAlpha=1,this.cMatrix=new t.Matrix,this.mouseEnable=!0,this.cFilters=[],this.name="",this._x=0,this._y=0,this._scaleX=1,this._scaleY=1,this._rotation=0,this._alpha=1,this._skewX=0,this._skewY=0,this._anchorX=0,this._anchorY=0,this._visible=!0,this.blendMode="normal",this._matrix=new t.Matrix,this._mask=null,this._filters=[],this._cp=!0,this._dragBounds=new t.Rectangle,this._isDragCenter=!1,this._lastDragPoint=new t.Point,this._texture=null,this._bounds=new t.Rectangle,this._drawRect=new t.Rectangle,this._a2x_sounds=null,this._a2x_res_obj={},this._instanceType="annie.DisplayObject"}return __extends(n,e),Object.defineProperty(n.prototype,"x",{get:function(){return this._x},set:function(t){this._setProperty("_x",t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},set:function(t){this._setProperty("_y",t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleX",{get:function(){return this._scaleX},set:function(t){this._setProperty("_scaleX",t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleY",{get:function(){return this._scaleY},set:function(t){this._setProperty("_scaleY",t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._setProperty("_rotation",t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._setProperty("_alpha",t,1)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"skewX",{get:function(){return this._skewX},set:function(t){this._setProperty("_skewX",t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"skewY",{get:function(){return this._skewY},set:function(t){this._setProperty("_skewY",t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"anchorX",{get:function(){return this._anchorX},set:function(t){this._setProperty("_anchorX",t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"anchorY",{get:function(){return this._anchorY},set:function(t){this._setProperty("_anchorY",t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visible",{get:function(){return this._visible},set:function(t){this._setProperty("_visible",t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"matrix",{get:function(){return this._matrix},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"mask",{get:function(){return this._mask},set:function(t){t!=this.mask&&(this._mask=t,t&&(t._isUseToMask=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"filters",{get:function(){return this._filters},set:function(t){this._setProperty("_filters",t,2)},enumerable:!0,configurable:!0}),n.prototype.globalToLocal=function(t,e){return void 0===e&&(e=null),this.cMatrix.invert().transformPoint(t.x,t.y,e)},n.prototype.localToGlobal=function(t,e){return void 0===e&&(e=null),this.parent?this.parent.cMatrix.transformPoint(t.x,t.y,e):this.cMatrix.transformPoint(t.x,t.y,e)},n.prototype.startDrag=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=null);var i=this;i.stage&&(t.Stage._dragDisplay=i,i._isDragCenter=e,i._lastDragPoint.x=Number.MAX_VALUE,i._lastDragPoint.y=Number.MAX_VALUE,n?(i._dragBounds.x=n.x,i._dragBounds.y=n.y,i._dragBounds.width=n.width,i._dragBounds.height=n.height):(i._dragBounds.x=0,i._dragBounds.y=0,i._dragBounds.width=0,i._dragBounds.height=0))},n.prototype.stopDrag=function(){t.Stage._dragDisplay==this&&(t.Stage._dragDisplay=null)},n.prototype.hitTestPoint=function(t,e){void 0===e&&(e=!1);var i=this;if(!i.visible)return null;if(e&&!i.mouseEnable)return null;if(e){if(i.getBounds().isPointIn(i.globalToLocal(t,n._bp)))return i}else if(i.getBounds().isPointIn(t))return i;return null},n.prototype.getBounds=function(){return this._bounds},n.prototype.getDrawRect=function(){var e=this,i=e.getBounds();if(e._mask){var a=e._mask.getDrawRect();i.x<a.x&&(i.x=a.x),i.y<a.y&&(i.y=a.y),i.width>a.width&&(i.width=a.width),i.height>a.height&&(i.height=a.height)}return e.matrix.transformPoint(i.x,i.y,n._p1),e.matrix.transformPoint(i.x+i.width,i.y,n._p2),e.matrix.transformPoint(i.x+i.width,i.y+i.height,n._p3),e.matrix.transformPoint(i.x,i.y+i.height,n._p4),t.Rectangle.createFromPoints(e._drawRect,n._p1,n._p2,n._p3,n._p4),e._drawRect},n.prototype.update=function(t){void 0===t&&(t=!0);var e=this,n=e._UI;if(e._cp&&(n.UM=n.UA=n.UF=!0,e._cp=!1),n.UM&&e._matrix.createBox(e._x,e._y,e._scaleX,e._scaleY,e._rotation,e._skewX,e._skewY,e._anchorX,e._anchorY),e.parent){var i=e.parent._UI;i.UM&&(n.UM=!0),i.UA&&(n.UA=!0),i.UF&&(n.UF=!0)}n.UM&&(e.cMatrix.setFrom(e._matrix),e.parent&&e.cMatrix.prepend(e.parent.cMatrix)),n.UA&&(e.cAlpha=e._alpha,e.parent&&(e.cAlpha*=e.parent.cAlpha)),n.UF,e.hasEventListener("onEnterFrame")&&e.dispatchEvent("onEnterFrame")},n.prototype.render=function(t){var e=this;t.draw(e)},n.prototype._onDispatchBubbledEvent=function(t){var e=this;if("onRemoveToStage"!=t||e.stage){e.stage=e.parent.stage;var n=e._a2x_sounds,i=e._a2x_res_class;if("onRemoveToStage"==t){if(e.dispatchEvent(t),e.stage=null,n&&n.length>0)for(var a=0;a<n.length;a++)n[a].stop();"annie.MovieClip"==e._instanceType&&i&&i.tf>1&&(e._curFrame=1,e._lastFrame=0,e._isPlaying=!0,e._isFront=!0)}else if("onAddToStage"==t){if(n&&n.length>0&&"annie.Sprite"==e._instanceType)for(var a=0;a<n.length;a++)n[a].play(0);e.dispatchEvent(t)}}},Object.defineProperty(n.prototype,"width",{get:function(){return this.getWH().width},set:function(t){var e=this,n=e.width;if(t>0&&n>0){var i=t/n;e.scaleX*=i}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.getWH().height},set:function(t){var e=this,n=e.height;if(t>0&&n>0){var i=t/n;e.scaleY*=i}},enumerable:!0,configurable:!0}),n.prototype.getWH=function(){var t=this;t.update();var e=t.getDrawRect();return{width:e.width,height:e.height}},n.prototype._setProperty=function(t,e,n){var i=this;if(i[t]!=e){i[t]=e;var a=i._UI;0==n?a.UM=!0:1==n?a.UA=!0:2==n?a.UF=!0:3==n&&(a.UD=!0)}},n.prototype.addSound=function(t){var e=this;e._a2x_sounds||(e._a2x_sounds=[]);var n=e._a2x_sounds;return n.push(t),n.length-1},n.prototype.removeSound=function(t){var e=this,n=e._a2x_sounds;n&&(t>0?n.length>t&&n.splice(t,1):n.length=0)},n.prototype.destroy=function(){var t=this;t._a2x_sounds=null,t._a2x_res_obj=null,t.mask=null,t.filters=null,t.parent=null,t.stage=null,t._bounds=null,t._drawRect=null,t._dragBounds=null,t._lastDragPoint=null,t.cFilters=null,t._matrix=null,t.cMatrix=null,t._UI=null,t._texture=null,e.prototype.destroy.call(this)},n._bp=new t.Point,n._p1=new t.Point,n._p2=new t.Point,n._p3=new t.Point,n._p4=new t.Point,n}(t.EventDispatcher);t.DisplayObject=e}(annie||(annie={}));var annie;!function(t){var e=function(e){function n(){e.call(this),this._a2x_res_class=null,this._a2x_res_children=[],this.mouseChildren=!0,this.children=[],this._instanceType="annie.Sprite"}return __extends(n,e),n.prototype.destroy=function(){for(var t=this,n=0;n<t.children.length;n++)t.children[n].destroy();t._a2x_res_children=null,t._a2x_res_class=null,t.children=null,e.prototype.destroy.call(this)},n.prototype.addChild=function(t){this.addChildAt(t,this.children.length)},n.prototype.removeChild=function(t){for(var e=this,n=e.children.length,i=0;i<n;i++)if(e.children[i]==t){e.removeChildAt(i);break}},n._getElementsByName=function(t,e,i,a,o){var r=e.children.length;if(r>0)for(var s,l=void 0,u=0;u<r;u++){if(l=e.children[u],(s=l.name)&&""!=s&&t.test(s)&&(o[o.length]=l,i))return;a&&null!=l.children&&n._getElementsByName(t,l,i,a,o)}},n.prototype.getChildByName=function(t,e,i){if(void 0===e&&(e=!0),void 0===i&&(i=!1),!t)return null;var a,o=this;a="string"==typeof t?new RegExp("^"+t+"$"):t;var r=[];n._getElementsByName(a,o,e,i,r);var s=r.length;return 0==s?null:1==s?r[0]:r},n.prototype.addChildAt=function(t,e){if(t){var n,i=this,a=i==t.parent;if(t.parent)if(a){n=i.children.length;for(var o=0;o<n;o++)if(i.children[o]==t){i.children.splice(o,1);break}}else t.parent.removeChild(t);t.parent=i,n=i.children.length,e>=n?i.children[i.children.length]=t:0==e?i.children.unshift(t):i.children.splice(e,0,t),i.stage&&!a&&(t._cp=!0,t._onDispatchBubbledEvent("onAddToStage"))}},n.prototype.getChildAt=function(t){return this.children.length-1>=t?this.children[t]:null},n.prototype.getChildIndex=function(t){for(var e=this.children.length,n=0;n<e;n++)if(this.children[n]==t)return n;return-1},n.prototype.swapChild=function(t,e){return!1},n.prototype._onDispatchBubbledEvent=function(t){var n=this,i=n.children.length;if("onRemoveToStage"!=t||n.stage){n.stage=n.parent.stage;for(var a=0;a<i;a++)n.children[a]._onDispatchBubbledEvent(t);e.prototype._onDispatchBubbledEvent.call(this,t)}},n.prototype.removeChildAt=function(t){var e,n=this,i=n.children.length-1;i<0||(e=t==i?n.children.pop():0==t?n.children.shift():n.children.splice(t,1)[0],e._onDispatchBubbledEvent("onRemoveToStage"),e.parent=null)},n.prototype.removeAllChildren=function(){for(var t=this,e=t.children.length,n=e-1;n>=0;n--)t.removeChildAt(0)},n.prototype.update=function(t){void 0===t&&(t=!0);var n=this;if(n._visible){e.prototype.update.call(this,t);for(var i=n.children.length,a=i-1;a>=0;a--)n.children[a].update(t);n._UI.UM=!1,n._UI.UA=!1,n._UI.UF=!1}},n.prototype.hitTestPoint=function(t,e){void 0===e&&(e=!1);var n=this;if(!n._visible)return null;if(e&&!n.mouseEnable)return null;for(var i,a,o=n.children.length,r=o-1;r>=0;r--)if(a=n.children[r],!a._isUseToMask&&(!a.mask||a.mask.parent!=a.parent||a.mask.hitTestPoint(t,e))&&(i=a.hitTestPoint(t,e)))return i;return null},n.prototype.getBounds=function(){var e=this,n=e._bounds;n.x=0,n.y=0,n.width=0,n.height=0;var i=e.children.length;if(i>0){for(var a=0;a<i;a++)e.children[a].visible&&t.Rectangle.createFromRects(n,e.children[a].getDrawRect());if(e.mask&&e.mask.parent==e.parent){var o=e.mask.getDrawRect();n.x<o.x&&(n.x=o.x),n.y<o.y&&(n.y=o.y),n.width>o.width&&(n.width=o.width),n.height>o.height&&(n.height=o.height)}}return n},n.prototype.render=function(t){var e=this;if(!e._cp&&e.cAlpha>0&&e._visible){for(var n=void 0,i=void 0,a=e.children.length,o=0;o<a;o++)i=e.children[o],i.cAlpha>0&&i._visible&&(n?i.mask&&i.mask.parent==i.parent?i.mask!=n&&(t.endMask(),n=i.mask,t.beginMask(n)):(t.endMask(),n=null):i.mask&&i.mask.parent==i.parent&&(n=i.mask,t.beginMask(n)),i.render(t));n&&t.endMask()}},n}(t.DisplayObject);t.Sprite=e}(annie||(annie={}));var annie;!function(t){var e=function(e){function n(){e.call(this),this._command=[],this.hitTestWidthPixel=!0,this.beginRadialGradientFill=function(t,e){this._fill(n.getGradientColor(t,e))},this.beginRadialGradientStroke=function(t,e,i,a,o,r){void 0===i&&(i=1),void 0===a&&(a=0),void 0===o&&(o=0),void 0===r&&(r=10),this._stroke(n.getGradientColor(t,e),i,a,o,r)},this._isUseToMask=!1,this.decodePath=function(t){for(var e=this,n=["moveTo","lineTo","quadraticCurveTo","bezierCurveTo","closePath"],i=t.length,a=0;a<i;a++)0==t[a]||1==t[a]?(e.addDraw(n[t[a]],[t[a+1],t[a+2]]),a+=2):(e.addDraw(n[t[a]],[t[a+1],t[a+2],t[a+3],t[a+4]]),a+=4)},this._offsetX=0,this._offsetY=0,this._instanceType="annie.Shape"}return __extends(n,e),n.getGradientColor=function(e,i){var a,o=t.CanvasRender.drawCtx;a=4==e.length?o.createLinearGradient(e[0],e[1],e[2],e[3]):o.createCircularGradient(e[2],e[3],e[4]);for(var r=0,s=i.length;r<s;r++)a.addColorStop(i[r][0],n.getRGBA(i[r][1],i[r][2]));return a},n.getBitmapStyle=function(e){return t.CanvasRender.drawCtx.createPattern(e,"repeat")},n.getRGBA=function(t,e){if(0==t.indexOf("0x")&&(t=t.replace("0x","#")),t.length<7&&(t="#000000"),1!=e){t="rgba("+parseInt("0x"+t.substr(1,2))+","+parseInt("0x"+t.substr(3,2))+","+parseInt("0x"+t.substr(5,2))+","+e+")"}return t},n.prototype.addDraw=function(t,e){var n=this;n._UI.UD=!0,n._command[n._command.length]=[1,t,e]},n.prototype.drawRoundRect=function(t,e,n,i,a,o,r,s){void 0===a&&(a=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===s&&(s=0);var l=(n<i?n:i)/2,u=0,c=0,h=0,d=0;a<0&&(a*=u=-1),a>l&&(a=l),o<0&&(o*=c=-1),o>l&&(o=l),s<0&&(s*=h=-1),s>l&&(s=l),r<0&&(r*=d=-1),r>l&&(r=l);var p=this._command;p[p.length]=[1,"moveTo",[t+n-o,e]],p[p.length]=[1,"arcTo",[t+n+o*c,e-o*c,t+n,e+o,o]],p[p.length]=[1,"lineTo",[t+n,e+i-s]],p[p.length]=[1,"arcTo",[t+n+s*h,e+i+s*h,t+n-s,e+i,s]],p[p.length]=[1,"lineTo",[t+r,e+i]],p[p.length]=[1,"arcTo",[t-r*d,e+i+r*d,t,e+i-r,r]],p[p.length]=[1,"lineTo",[t,e+a]],p[p.length]=[1,"arcTo",[t-a*u,e-a*u,t+a,e,a]],p[p.length]=[1,"closePath",[]]},n.prototype.moveTo=function(t,e){this._command[this._command.length]=[1,"moveTo",[t,e]]},n.prototype.lineTo=function(t,e){this._command[this._command.length]=[1,"lineTo",[t,e]]},n.prototype.arcTo=function(t,e){this._command[this._command.length]=[1,"arcTo",[t,e]]},n.prototype.quadraticCurveTo=function(t,e,n,i){this._command[this._command.length]=[1,"quadraticCurveTo",[t,e,n,i]]},n.prototype.bezierCurveTo=function(t,e,n,i,a,o){this._command[this._command.length]=[1,"bezierCurveTo",[t,e,n,i,a,o]]},n.prototype.closePath=function(){this._command[this._command.length]=[1,"closePath",[]]},n.prototype.drawRect=function(t,e,n,i){var a=this._command;a[a.length]=[1,"moveTo",[t,e]],a[a.length]=[1,"lineTo",[t+n,e]],a[a.length]=[1,"lineTo",[t+n,e+i]],a[a.length]=[1,"lineTo",[t,e+i]],a[a.length]=[1,"closePath",[]]},n.prototype.drawArc=function(t,e,n,i,a){this._command[this._command.length]=[1,"arc",[t,e,n,i/180*Math.PI,a/180*Math.PI]]},n.prototype.drawCircle=function(t,e,n){this._command[this._command.length]=[1,"arc",[t,e,n,0,2*Math.PI]]},n.prototype.drawEllipse=function(t,e,n,i){var a=.5522848,o=n/2*a,r=i/2*a,s=t+n,l=e+i,u=t+n/2,c=e+i/2,h=this._command;h[h.length]=[1,"moveTo",[t,c]],h[h.length]=[1,"bezierCurveTo",[t,c-r,u-o,e,u,e]],h[h.length]=[1,"bezierCurveTo",[u+o,e,s,c-r,s,c]],h[h.length]=[1,"bezierCurveTo",[s,c+r,u+o,l,u,l]],h[h.length]=[1,"bezierCurveTo",[u-o,l,t,c+r,t,c]]},n.prototype.clear=function(){var t=this;t._command=[],t._UI.UD=!0,t._offsetX=0,t._offsetY=0,t._bounds.width=0,t._bounds.height=0},n.prototype.beginFill=function(t){this._fill(t)},n.prototype.beginLinearGradientFill=function(t,e){this._fill(n.getGradientColor(t,e))},n.prototype.beginBitmapFill=function(t,e){var i=this;e&&(i._isBitmapFill=e),i._fill(n.getBitmapStyle(t))},n.prototype._fill=function(t){var e=this._command;e[e.length]=[0,"fillStyle",t],e[e.length]=[1,"beginPath",[]],this._UI.UD=!0},n.prototype.beginStroke=function(t,e,n,i,a){void 0===e&&(e=1),void 0===n&&(n=0),void 0===i&&(i=0),void 0===a&&(a=0),this._stroke(t,e,n,i,a)},n.prototype.beginLinearGradientStroke=function(t,e,i,a,o,r){void 0===i&&(i=1),void 0===a&&(a=0),void 0===o&&(o=0),void 0===r&&(r=10),this._stroke(n.getGradientColor(t,e),i,a,o,r)},n.prototype.beginBitmapStroke=function(t,e,i,a,o,r){void 0===i&&(i=1),void 0===a&&(a=0),void 0===o&&(o=0),void 0===r&&(r=10);var s=this;e&&(s._isBitmapStroke=e),s._stroke(n.getBitmapStyle(t),i,a,o,r)},n.prototype._stroke=function(t,e,i,a,o){var r=this._command;r[r.length]=[0,"lineWidth",e],r[r.length]=[0,"lineCap",n._caps[i]],r[r.length]=[0,"lineJoin",n._joins[a]],r[r.length]=[0,"miterLimit",o],r[r.length]=[0,"strokeStyle",t],r[r.length]=[1,"beginPath",[]],this._UI.UD=!0},n.prototype.endFill=function(){var t=this,e=t._command;e[e.length]=[1,"fill",[]]},n.prototype.endStroke=function(){var t=this,e=t._command;e[e.length]=[1,"stroke",[]]},n.prototype.update=function(t){void 0===t&&(t=!1);var n=this;if(n._visible){if(e.prototype.update.call(this,t),n._UI.UD||n._UI.UF){var i=n._command.length,a=void 0,o=void 0,r=void 0,s=void 0,l=void 0;if(i>0){var u=void 0,c=0,h=0,d=0;for(l=0;l<i;l++)if(u=n._command[l],1==u[0]){if("moveTo"==u[1]||"lineTo"==u[1]||"arcTo"==u[1]||"bezierCurveTo"==u[1])void 0==a&&(a=u[2][0]),void 0==o&&(o=u[2][1]),void 0==r&&(r=u[2][0]),void 0==s&&(s=u[2][1]),"bezierCurveTo"==u[1]?(a=Math.min(a,u[2][0],u[2][2],u[2][4]),o=Math.min(o,u[2][1],u[2][3],u[2][5]),r=Math.max(r,u[2][0],u[2][2],u[2][4]),s=Math.max(s,u[2][1],u[2][3],u[2][5]),c=u[2][4],h=u[2][5]):(a=Math.min(a,u[2][0]),o=Math.min(o,u[2][1]),r=Math.max(r,u[2][0]),s=Math.max(s,u[2][1]),c=u[2][0],h=u[2][1]);else if("quadraticCurveTo"==u[1]){var p=.5*(c+u[2][0]),_=.5*(h+u[2][1]),f=.5*(u[2][0]+u[2][2]),g=.5*(u[2][1]+u[2][3]);void 0==a&&(a=p),void 0==o&&(o=_),void 0==r&&(r=p),void 0==s&&(s=_),a=Math.min(a,p,f,u[2][2]),o=Math.min(o,_,g,u[2][3]),r=Math.max(r,p,f,u[2][2]),s=Math.max(s,_,g,u[2][3]),c=u[2][2],h=u[2][3]}else if("arc"==u[1]){var v=u[2][0],m=u[2][1],y=u[2][2],b=v-y,P=m-y,x=v+y,w=m+y;void 0==a&&(a=b),void 0==o&&(o=P),void 0==r&&(r=x),void 0==s&&(s=w),a=Math.min(a,b),o=Math.min(o,P),r=Math.max(r,x),s=Math.max(s,w)}}else"lineWidth"==u[1]&&d<u[2]&&(d=u[2]);if(void 0!=a||d>0){void 0==a&&(a=0,o=0),a-=d>>1,o-=d>>1,r+=d>>1,s+=d>>1;var M=r-a,E=s-o;n._offsetX=a,n._offsetY=o,n._bounds.x=a,n._bounds.y=o,n._bounds.width=M,n._bounds.height=E}}n._UI.UD=!1}n._UI.UM=!1,n._UI.UA=!1,n._UI.UF=!1}},n.prototype._draw=function(t){for(var e,n=this,i=n._command,a=i.length,o=n._offsetX,r=n._offsetY,s=0;s<a;s++)if(e=i[s],e[0]>0){var l=e[2].length;if(0==l)t[e[1]]();else if(2==l)t[e[1]](e[2][0],e[2][1]);else if(4==l)t[e[1]](e[2][0],e[2][1],e[2][2],e[2][3]);else if(5==l)t[e[1]](e[2][0],e[2][1],e[2][2],e[2][3],e[2][4]);else if(6==l){var u=e[2][4],c=e[2][5];2==e[0]&&(u-=o,c-=r),t[e[1]](e[2][0],e[2][1],e[2][2],e[2][3],u,c)}}else t[e[1]]=e[2]},n.prototype.hitTestPoint=function(t,e){void 0===e&&(e=!1);var n=this;if(e&&!n.mouseEnable)return null;var i=t;return e&&(i=n.globalToLocal(t)),n.getBounds().isPointIn(i)?n:null},n.prototype.changeColor=function(t){for(var e=this,n=e._command.length,i=e._command,a=0;a<n;a++)0==i[a][0]&&("fillStyle"==i[a][1]&&t.fillColor&&i[a][2]!=t.fillColor&&(i[a][2]=t.fillColor,e._UI.UD=!0),"strokeStyle"==i[a][1]&&t.strokeColor&&i[a][2]!=t.strokeColor&&(i[a][2]=t.strokeColor,e._UI.UD=!0),"lineWidth"==i[a][1]&&t.lineWidth&&i[a][2]!=t.lineWidth&&(i[a][2]=t.lineWidth,e._UI.UD=!0))},n.prototype.render=function(t){this._isUseToMask||e.prototype.render.call(this,t)},n.prototype.destroy=function(){var t=this;t._command=null,t._isBitmapStroke=null,t._isBitmapFill=null,e.prototype.destroy.call(this)},n._caps=["butt","round","square"],n._joins=["miter","round","bevel"],n}(t.DisplayObject);t.Shape=e}(annie||(annie={}));var annie;!function(t){var e=function(t){function e(e){t.call(this),this.type="",this.target=null,this.data=null,this._pd=!1,this._instanceType="annie.Event",
this.type=e}return __extends(e,t),e.prototype.preventDefault=function(){this._pd=!0},e.prototype.destroy=function(){var t=this;t.target=null,t.data=null},e.prototype.reset=function(t,e){this.type=t,this._pd=!1,this.target=e},e.RESIZE="onResize",e.ON_RUN_CHANGED="onRunChanged",e.ON_PLAY_UPDATE="onPlayUpdate",e.ON_PLAY_END="onPlayEnd",e.ON_PLAY_START="onPlayStart",e.ON_FLIP_START="onFlipStart",e.ON_FLIP_STOP="onFlipStop",e.ON_SCROLL_TO_HEAD="onScrollToHead",e.ON_SCROLL_STOP="onScrollStop",e.ON_SCROLL_START="onScrollStart",e.ON_SCROLL_TO_END="onScrollToEnd",e.ON_SLIDE_START="onSlideStart",e.ON_SLIDE_END="onSlideEnd",e.INIT_TO_STAGE="onInitStage",e.ADD_TO_STAGE="onAddToStage",e.REMOVE_TO_STAGE="onRemoveToStage",e.ENTER_FRAME="onEnterFrame",e.END_FRAME="onEndFrame",e.CALL_FRAME="onCallFrame",e.COMPLETE="onComplete",e.PROGRESS="onProgress",e.ERROR="onError",e.ABORT="onAbort",e.START="onStart",e.TIMER="onTimer",e.TIMER_COMPLETE="onTimerComplete",e}(t.AObject);t.Event=e}(annie||(annie={}));var annie;!function(t){var e=function(t){function e(e){t.call(this,e),this.clientX=0,this.clientY=0,this.stageX=0,this.stageY=0,this.localX=0,this.localY=0,this.currentTarget=null,this.identifier=0,this._instanceType="annie.MouseEvent"}return __extends(e,t),e.prototype.updateAfterEvent=function(){this.target.stage._cp=!0},e.prototype.destroy=function(){this.currentTarget=null,t.prototype.destroy.call(this)},e.MOUSE_DOWN="onMouseDown",e.MOUSE_UP="onMouseUp",e.CLICK="onMouseClick",e.MOUSE_MOVE="onMouseMove",e.MOUSE_OVER="onMouseOver",e.MOUSE_OUT="onMouseOut",e}(t.Event);t.MouseEvent=e}(annie||(annie={}));var annie;!function(t){var e=t.Sprite,n=t.Shape,i=t.Event,a=t.MouseEvent,o=t.Point,r=function(r){function s(s,l,u,c){r.call(this),this.totalPage=0,this.currPage=0,this.speed=.4,this.state="stop",this.timerArg0=0,this.timerArg1=0,this.px=0,this.py=0,this.rPage0=new e,this.rPage1=new e,this.pageMC=new e,this.leftPage=null,this.rightPage=null,this.rMask0=new n,this.rMask1=new n,this.shadow0=new n,this.shadow1=new n,this.sMask0=new n,this.sMask1=new n,this.pages=[],this.stageMP=new o,this.canFlip=!0;var h=this;h._instanceType="annie.FlipBook",h.getPageCallback=c,h.bW=s,h.bH=l,h.totalPage=u,h.currPage=h.toPage=0,h.crossGap=Math.sqrt(h.bW*h.bW+h.bH*h.bH),h.p1=new o(0,0),h.p2=new o(0,h.bH),h.p3=new o(h.bW+h.bW,0),h.p4=new o(h.bW+h.bW,h.bH),h.limitP1=new o(h.bW,0),h.limitP2=new o(h.bW,h.bH),h.toPosArr=[h.p3,h.p4,h.p1,h.p2],h.myPosArr=[h.p1,h.p2,h.p3,h.p4],h.addChild(h.pageMC),h.addChild(h.rPage0),h.addChild(h.shadow0),h.addChild(h.rPage1),h.addChild(h.shadow1),h.rPage0.mouseEnable=!1,h.rPage1.mouseEnable=!1,h.shadow0.mouseEnable=!1,h.shadow1.mouseEnable=!1,h.setShadowMask(h.shadow0,h.sMask0,1.5*h.bW,3*h.bH),h.setShadowMask(h.shadow1,h.sMask1,1.5*h.bW,3*h.bH),h.shadow0.visible=!1,h.shadow1.visible=!1,h.rPage1.mask=h.rMask1,h.rPage0.mask=h.rMask0,h.setPage(h.currPage);var d=h.onMouseDown.bind(h),p=h.onMouseUp.bind(h),_=h.onMouseMove.bind(h),f=h.onEnterFrame.bind(h);h.addEventListener(t.Event.ADD_TO_STAGE,function(t){h.stage.addEventListener(a.MOUSE_DOWN,d),h.stage.addEventListener(a.MOUSE_UP,p),h.stage.addEventListener(a.MOUSE_MOVE,_),h.addEventListener(i.ENTER_FRAME,f)}),h.addEventListener(t.Event.REMOVE_TO_STAGE,function(t){h.stage.removeEventListener(a.MOUSE_DOWN,d),h.stage.removeEventListener(a.MOUSE_UP,p),h.stage.removeEventListener(a.MOUSE_MOVE,_),h.removeEventListener(i.ENTER_FRAME,f)})}return __extends(s,r),s.prototype.drawPage=function(t,e){var n,i,a=this;1==t?(e=a.checkLimit(e,a.limitP1,a.bW),e=a.checkLimit(e,a.limitP2,a.crossGap),i=a.getBookArr(e,a.p1,a.p2),n=i[1],a.getLayerArr(e,n,a.p1,a.p2,a.limitP1,a.limitP2),a.getShadow(a.shadow0,a.sMask0,a.p1,e,[a.p1,a.p3,a.p4,a.p2],.5),a.getShadow(a.shadow1,a.sMask1,a.p1,e,a.layer1Arr,.45),a.rPage1.rotation=a.angle(e,n)+90,a.rPage1.x=i[3].x,a.rPage1.y=i[3].y,a.rPage0.x=a.p1.x,a.rPage0.y=a.p1.y):2==t?(e=a.checkLimit(e,a.limitP2,a.bW),e=a.checkLimit(e,a.limitP1,a.crossGap),i=a.getBookArr(e,a.p2,a.p1),n=i[1],a.getLayerArr(e,n,a.p2,a.p1,a.limitP2,a.limitP1),a.getShadow(a.shadow0,a.sMask0,a.p2,e,[a.p1,a.p3,a.p4,a.p2],.5),a.getShadow(a.shadow1,a.sMask1,a.p2,e,a.layer1Arr,.45),a.rPage1.rotation=a.angle(e,n)-90,a.rPage1.x=i[2].x,a.rPage1.y=i[2].y,a.rPage0.x=a.p1.x,a.rPage0.y=a.p1.y):3==t?(e=a.checkLimit(e,a.limitP1,a.bW),e=a.checkLimit(e,a.limitP2,a.crossGap),i=a.getBookArr(e,a.p3,a.p4),n=i[1],a.getLayerArr(e,n,a.p3,a.p4,a.limitP1,a.limitP2),a.getShadow(a.shadow0,a.sMask0,a.p3,e,[a.p1,a.p3,a.p4,a.p2],.5),a.getShadow(a.shadow1,a.sMask1,a.p3,e,a.layer1Arr,.4),a.rPage1.rotation=a.angle(e,n)+90,a.rPage1.x=e.x,a.rPage1.y=e.y,a.rPage0.x=a.limitP1.x,a.rPage0.y=a.limitP1.y):(e=a.checkLimit(e,a.limitP2,a.bW),e=a.checkLimit(e,a.limitP1,a.crossGap),i=a.getBookArr(e,a.p4,a.p3),n=i[1],a.getLayerArr(e,n,a.p4,a.p3,a.limitP2,a.limitP1),a.getShadow(a.shadow0,a.sMask0,a.p4,e,[a.p1,a.p3,a.p4,a.p2],.5),a.getShadow(a.shadow1,a.sMask1,a.p4,e,a.layer1Arr,.4),a.rPage1.rotation=a.angle(e,n)-90,a.rPage1.x=n.x,a.rPage1.y=n.y,a.rPage0.x=a.limitP1.x,a.rPage0.y=a.limitP1.y),a.getShape(a.rMask1,a.layer1Arr),a.getShape(a.rMask0,a.layer0Arr)},s.prototype.checkLimit=function(t,e,n){var i=this,a=Math.abs(i.pos(e,t)),r=i.angle(e,t);if(a>n){var s=n*Math.sin(r/180*Math.PI),l=n*Math.cos(r/180*Math.PI);t=new o(e.x-l,e.y-s)}return t},s.prototype.getPage=function(t){var e=this;return e.pages[t-1]||(e.pages[t-1]=e.getPageCallback(t)),e.pages[t-1]},s.prototype.getBookArr=function(t,e,n){var i=this,a=[],r=Math.abs(.5*i.pos(e,t)),s=i.angle(e,t),l=r/Math.cos(s/180*Math.PI),u=new o(e.x-l,e.y),c=i.angle(t,u)-i.angle(t,n),h=i.pos(t,n),d=h*Math.sin(c/180*Math.PI),p=h*Math.cos(c/180*Math.PI),_=new o(e.x+p,e.y+d),f=i.angle(u,t),g=i.bW*Math.sin(f/180*Math.PI),v=i.bW*Math.cos(f/180*Math.PI),m=new o(_.x+v,_.y+g),y=new o(t.x+v,t.y+g);return a.push(t),a.push(_),a.push(m),a.push(y),a},s.prototype.getLayerArr=function(t,e,n,i,a,r){var s=this,l=[],u=[],c=Math.abs(.5*s.pos(n,t)),h=s.angle(n,t),d=c/Math.sin(h/180*Math.PI),p=c/Math.cos(h/180*Math.PI),_=new o(n.x-p,n.y),f=new o(n.x,n.y-d),g=e;if(Math.abs(s.pos(t,i))>s.bH){l.push(g);var v=Math.abs(.5*s.pos(g,i)),m=v/Math.cos(h/180*Math.PI);f=new o(i.x-m,i.y)}else u.push(i);l.push(f),l.push(_),l.push(t),s.layer1Arr=l,u.push(r),u.push(a),u.push(_),u.push(f),s.layer0Arr=u},s.prototype.getShape=function(t,e){var n=e.length;t.clear(),t.beginFill("#000"),t.moveTo(e[0].x,e[0].y);for(var i=1;i<n;i++)t.lineTo(e[i].x,e[i].y);t.endFill()},s.prototype.setShadowMask=function(t,e,n,i){t.beginLinearGradientFill([.5*-n,4,.5*n,4],[{o:0,c:"#000000",a:0},{o:1,c:"#000000",a:.6}]),t.drawRect(.5*-n,.5*-i,.5*n,i),t.endFill(),t.beginLinearGradientFill([.5*-n,4,.5*n,4],[{o:1,c:"#000000",a:0},{o:0,c:"#000000",a:.6}]),t.drawRect(0,.5*-i,.5*n,i),t.endFill(),t.mask=e},s.prototype.getShadow=function(t,e,n,i,a,o){var r,s,l=this;t.visible=!0,t.x=i.x+(n.x-i.x)*o,t.y=i.y+(n.y-i.y)*o,t.rotation=l.angle(n,i),r=.5*Math.abs(n.x-i.x)/l.bW,s=1-r*r,t.scaleX=r+.1,t.alpha=s+.1,l.getShape(e,a)},s.prototype.setPage=function(t){var e=this;t>0&&t<=e.totalPage&&(e.leftPage=e.getPage(t),e.leftPage.x=e.leftPage.y=0,e.pageMC.addChild(e.leftPage)),t+1>0&&t+1<e.totalPage&&(e.rightPage=e.getPage(t+1),e.rightPage.x=e.bW,e.rightPage.y=0,e.pageMC.addChild(e.rightPage))},s.prototype.onMouseDown=function(t){var e=this;if(e.canFlip&&"stop"==e.state){e.stageMP.x=t.clientX,e.stageMP.y=t.clientY;var n=e.globalToLocal(e.stageMP);e.stageMP=n,e.timerArg0=e.checkArea(n),e.timerArg0=e.timerArg0<0?-e.timerArg0:e.timerArg0,e.timerArg0>0&&(e.timerArg0<3&&e.currPage>0||e.timerArg0>2&&e.currPage<=e.totalPage-2)&&(e.state="start",e.flushPage(),t.updateAfterEvent(),e.dispatchEvent("onFlipStart"))}},s.prototype.onMouseUp=function(t){var e=this;if("start"==e.state){e.stageMP.x=t.clientX,e.stageMP.y=t.clientY;var n=e.globalToLocal(e.stageMP);e.timerArg1=e.checkArea(n),e.state="auto",e.stageMP=n}},s.prototype.onMouseMove=function(t){var e=this;if("start"==e.state){e.stageMP.x=t.clientX,e.stageMP.y=t.clientY;var n=e.globalToLocal(e.stageMP);e.stageMP=n}},s.prototype.checkArea=function(t){var e,n=this,i=n.bW+n.bW,a=n.bH;return t.x>0&&t.x<=.5*i?(e=t.y>0&&t.y<=.5*a?1:t.y>.5*a&&t.y<a?2:0,t.x<=50&&(e=t.y>0&&t.y<=50?-1:t.y>a-50&&t.y<a?-2:e),e):t.x>.5*i&&t.x<i?(e=t.y>0&&t.y<=.5*a?3:t.y>.5*a&&t.y<a?4:0,t.x>=i-50&&(e=t.y>0&&t.y<=50?-3:t.y>a-50&&t.y<a?-4:e),e):0},s.prototype.flipTo=function(t){var e,n=this;t=t%2==1?t-1:t,e=t-n.currPage,"stop"==n.state&&t>=0&&t<=n.totalPage&&0!=e&&(n.timerArg0=e<0?1:3,n.timerArg1=-1,n.toPage=t>n.totalPage?n.totalPage:t,n.state="auto",n.flushPage())},s.prototype.nextPage=function(){this.flipTo(this.currPage+2)},s.prototype.prevPage=function(){this.flipTo(this.currPage-1)},s.prototype.startPage=function(){this.flipTo(0)},s.prototype.endPage=function(){this.flipTo(this.totalPage)},s.prototype.flushPage=function(){var t,e,n=this,i=n.myPosArr[n.timerArg0-1],a=null;1==n.timerArg0||2==n.timerArg0?(n.toPage=n.toPage==n.currPage?n.currPage-2:n.toPage,t=n.currPage,e=n.toPage+1,this.pageMC.removeChild(n.leftPage),n.toPage>0&&(a=n.getPage(n.currPage-2),a.x=0,n.leftPage=a,n.pageMC.addChild(a))):3!=n.timerArg0&&4!=n.timerArg0||(n.toPage=n.toPage==n.currPage?n.currPage+2:n.toPage,t=n.currPage+1,e=n.toPage,n.pageMC.removeChild(n.rightPage),n.toPage+1<n.totalPage&&(a=n.getPage(n.currPage+3),a.x=n.bW,n.rightPage=a,n.pageMC.addChild(a))),n.px=i.x,n.py=i.y,t>0&&t<=n.totalPage&&(a=n.getPage(t),a.x=0,a.y=0,n.rPage0.addChild(a)),e>0&&e<=n.totalPage&&(a=n.getPage(e),a.x=0,a.y=0,n.rPage1.addChild(a))},s.prototype.onEnterFrame=function(t){var e,n,i,a,r,s,l=this,u=l.toPosArr[l.timerArg0-1],c=l.myPosArr[l.timerArg0-1];if("start"==l.state){s=l.speed;var h=l.stageMP;l.px+=(h.x-l.px)*s>>0,l.py+=(h.y-l.py)*s>>0;var d=new o(l.px,l.py);l.drawPage(l.timerArg0,d)}else"auto"==l.state&&(Math.abs(u.x-l.px)>1.5*l.bW&&l.timerArg1>0?(e=c.x,n=c.y,i=0):(e=u.x,n=u.y,i=1),a=e-l.px>>0,r=n-l.py>>0,l.timerArg1<0?(s=.7*l.speed,l.py=l.arc(l.bW,a,u.y)):(s=l.speed,l.py=r*s+l.py),l.px=a*s+l.px,l.drawPage(l.timerArg0,new o(l.px,l.py)),0==a&&0==r&&(l.rPage0.removeAllChildren(),l.rPage1.removeAllChildren(),l.shadow0.visible=!1,l.shadow1.visible=!1,l.toPage=0==i?l.currPage:l.toPage,l.currPage=l.toPage,l.pageMC.removeAllChildren(),l.setPage(l.currPage),l.state="stop",l.dispatchEvent("onFlipStop")))},s.prototype.arc=function(t,e,n){var i=2*t,a=t*t+i*i,o=Math.abs(e)-t;return n-(Math.sqrt(a-o*o)-i)},s.prototype.angle=function(t,e){var n=t.x-e.x,i=t.y-e.y,a=180*Math.atan2(i,n)/Math.PI;return a<0?a+360:a},s.prototype.pos=function(t,e){var n=t.x-e.x,i=t.y-e.y,a=Math.sqrt(n*n+i*i);return t.x>e.x?a:-a},s.prototype.destroy=function(){var t=this;t.layer0Arr=null,t.layer1Arr=null,t.toPosArr=null,t.myPosArr=null,t.rPage0=null,t.rMask0=null,t.rMask1=null,t.sMask0=null,t.sMask1=null,t.leftPage=null,t.rightPage=null,t.pageMC=null,t.rightPage=null,t.shadow0=null,t.shadow1=null,t.p1=null,t.p2=null,t.p3=null,t.p4=null,t.limitP1=null,t.limitP2=null,t.pages=null,t.stageMP=null,t.getPageCallback=null,r.prototype.destroy.call(this)},s}(e);t.FlipBook=r}(annie||(annie={}));var annie;!function(t){var e=function(e){function n(n,i,a,o,r,s,l){void 0===s&&(s=!0),void 0===l&&(l=1),e.call(this,o,r,0,s),this._items=null,this.data=[],this.downL=null,this._lastFirstId=-1;var u=this;u._isInit=!1,u._instanceType="annie.ScrollList",u._itemW=i,u._itemH=a,u._items=[],u._itemClass=n,u._itemCount=0,u._cols=l,u._updateViewRect(),u.addEventListener(t.Event.ENTER_FRAME,u.flushData.bind(u))}return __extends(n,e),Object.defineProperty(n.prototype,"loadingView",{get:function(){return this.downL},enumerable:!0,configurable:!0}),n.prototype.updateData=function(t,e){void 0===e&&(e=!1);var n=this;if(!n._isInit||e?(n.data=t,n._isInit=!0):n.data=n.data.concat(t),n._lastFirstId=-1,n.maxDistance=Math.ceil(n.data.length/n._cols)*n._itemRow,n.downL){n.downL[n.paramXY]=Math.max(n.distance,n.maxDistance);var i=n.downL.getWH();n.maxDistance+="x"==n.paramXY?i.width:i.height}},n.prototype.flushData=function(){var t=this;if(t._isInit&&t.view._UI.UM){var e=(Math.abs(Math.floor(t.view[t.paramXY]/t._itemRow))-1)*t._cols;if((e=e<0?0:e)!=t._lastFirstId&&(t._lastFirstId=e,e!=t._items[0].id))for(var n=0;n<t._cols;n++)t.speed>0?t._items.unshift(t._items.pop()):t._items.push(t._items.shift());for(var i=0;i<t._itemCount;i++){var a=t._items[i];a._a2x_sl_id!=e&&(a.initData(t.data[e]?e:-1,t.data[e]),a.visible=!!t.data[e],a[t.paramXY]=Math.floor(e/t._cols)*t._itemRow,a[t._disParam]=e%t._cols*t._itemCol,a._a2x_sl_id=e),e++}}},n.prototype.setViewRect=function(t,n,i){e.prototype.setViewRect.call(this,t,n,i);var a=this;a._itemRow&&a._itemCol&&a._updateViewRect()},n.prototype._updateViewRect=function(){var t=this;t.isVertical?(t._disParam="x",t._itemRow=t._itemH,t._itemCol=t._itemW):(t._disParam="y",t._itemRow=t._itemW,t._itemCol=t._itemH);var e=(Math.ceil(t.distance/t._itemRow)+1)*t._cols;if(e!=t._itemCount){if(e>t._itemCount)for(var n=t._itemCount;n<e;n++){var i=new t._itemClass;i.id=-1,i.data=null,t._items.push(i),t.view.addChild(i)}else for(var n=0;n<t._itemCount-e;n++)t.view.removeChild(t._items.pop());t._itemCount=e,t._lastFirstId=-1}},n.prototype.setLoading=function(t){var e=this;if(e.downL){e.view.removeChild(e.downL);var n=e.downL.getWH();e.maxDistance-="x"==e.paramXY?n.width:n.height,e.downL=null}if(t){e.downL=t,e.view.addChild(t),e.downL[e.paramXY]=Math.max(e.distance,e.maxDistance);var n=e.downL.getWH();e.maxDistance+="x"==e.paramXY?n.width:n.height}else e.isStop=!1},n.prototype.destroy=function(){var t=this;t._items=null,t._itemClass=null,t.data=null,t.downL=null,e.prototype.destroy.call(this)},n}(t.ScrollPage);t.ScrollList=e}(annie||(annie={}));